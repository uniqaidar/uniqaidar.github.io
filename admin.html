<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù¾Ø§Ù†ÛÙ„ÛŒ Ø¨Û•Ú•ÛÙˆÛ•Ø¨Ø±Ø¯Ù† â€” UniQaidar</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&display=swap');

:root {
    --bg:       #0d0d0d;
    --surface:  #161616;
    --surface2: #1e1e1e;
    --border:   #2c2c2c;
    --accent:   #0984e3;
    --green:    #00b894;
    --red:      #e17055;
    --yellow:   #fdcb6e;
    --purple:   #a29bfe;
    --text:     #ececec;
    --muted:    #555;
    --mono:     'IBM Plex Mono', monospace;
}

* { box-sizing: border-box; margin: 0; padding: 0; }
body { background: var(--bg); color: var(--text); font-family: Tahoma, Arial, sans-serif; min-height: 100vh; direction: rtl; }

/* Ù„Û†Ø¯ÛŒÙ†Ú¯ */
#loading-screen {
    position: fixed; inset: 0; background: var(--bg);
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    z-index: 9999; gap: 16px;
}
.spinner { width: 40px; height: 40px; border: 3px solid var(--border); border-top-color: var(--accent); border-radius: 50%; animation: spin 0.8s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

/* Ø³ÛØªÛ•Ù¾ */
#setup-screen {
    display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.92);
    align-items: center; justify-content: center; z-index: 9998; padding: 20px;
}
.setup-box { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 32px; max-width: 500px; width: 100%; }
.setup-box h2 { font-size: 1.2rem; margin-bottom: 6px; }
.setup-box .sub { color: var(--muted); font-size: 0.82rem; margin-bottom: 20px; line-height: 1.7; }
.setup-steps { background: var(--bg); border: 1px solid var(--border); border-radius: 8px; padding: 14px; font-size: 0.8rem; line-height: 2.1; margin-bottom: 20px; color: var(--muted); }
.setup-steps strong { color: var(--yellow); }
.setup-steps a { color: var(--accent); text-decoration: none; }
.setup-field { margin-bottom: 12px; }
.setup-field label { display: block; font-size: 0.75rem; color: var(--muted); margin-bottom: 5px; font-family: var(--mono); }

/* Ù‡ÛØ¯Û•Ø± */
header { background: var(--surface); border-bottom: 1px solid var(--border); padding: 13px 22px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 100; gap: 10px; flex-wrap: wrap; }
header h1 { font-size: 0.95rem; font-weight: bold; color: var(--accent); }
.header-right { display: flex; align-items: center; gap: 10px; }
.repo-badge { font-family: var(--mono); font-size: 0.7rem; background: var(--bg); border: 1px solid var(--border); border-radius: 6px; padding: 4px 10px; color: var(--yellow); }
.status-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--muted); flex-shrink: 0; }
.status-dot.on { background: var(--green); box-shadow: 0 0 6px var(--green); }

/* Ù†Ø§ÙˆÛ•Ú•Û†Ú© */
main { max-width: 980px; margin: 0 auto; padding: 22px 16px; display: flex; flex-direction: column; gap: 20px; }

/* ØªØ§Ø¨Û•Ú©Ø§Ù† */
.tabs { display: flex; gap: 3px; background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 4px; flex-wrap: wrap; }
.tab { flex: 1; min-width: 80px; padding: 9px 6px; text-align: center; border-radius: 7px; cursor: pointer; font-size: 0.82rem; font-weight: bold; transition: all 0.2s; color: var(--muted); border: none; background: transparent; font-family: Tahoma, Arial, sans-serif; white-space: nowrap; }
.tab.active { background: var(--surface2); color: var(--text); border: 1px solid var(--border); }
.tab-content { display: none; }
.tab-content.active { display: block; }

/* Ø¨Û†Ú©Ø³ */
.box { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; margin-bottom: 16px; }
.box-header { padding: 12px 18px; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 10px; font-size: 0.9rem; font-weight: bold; }
.box-header .dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
.box-body { padding: 18px; }

/* ÙÛ†Ø±Ù… */
.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 13px; }
.form-group { display: flex; flex-direction: column; gap: 5px; }
.form-group.full { grid-column: 1 / -1; }
label { font-size: 0.75rem; color: var(--muted); font-family: var(--mono); }
input, select, textarea { background: var(--bg); border: 1px solid var(--border); color: var(--text); border-radius: 7px; padding: 9px 12px; font-size: 0.88rem; font-family: Tahoma, Arial, sans-serif; width: 100%; transition: border-color 0.2s; direction: rtl; }
input:focus, select:focus, textarea:focus { outline: none; border-color: var(--accent); }
input[readonly] { color: var(--muted); }
textarea { resize: vertical; min-height: 80px; line-height: 1.7; }

/* Ù¾ÛŒÙ„Û•Ú©Ø§Ù†ÛŒ Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒ */
.cat-pills { display: flex; flex-wrap: wrap; gap: 7px; }
.cat-pill { display: inline-flex; align-items: center; background: var(--bg); border: 1px solid var(--border); border-radius: 20px; padding: 6px 14px; cursor: pointer; font-size: 0.84rem; transition: all 0.18s; user-select: none; color: var(--text); font-family: Tahoma, Arial, sans-serif; }
.cat-pill:hover { border-color: var(--accent); color: #fff; background: rgba(9,132,227,0.2); }
.cat-pill.on { background: var(--accent); border-color: var(--accent); color: #fff; }

/* Ø¯ÙˆÚ¯Ù…Û•Ú©Ø§Ù† */
.btn { padding: 9px 18px; border: none; border-radius: 8px; cursor: pointer; font-size: 0.86rem; font-weight: bold; font-family: Tahoma, Arial, sans-serif; transition: all 0.18s; display: inline-flex; align-items: center; gap: 7px; white-space: nowrap; }
.btn:disabled { opacity: 0.45; cursor: not-allowed; }
.btn-primary { background: var(--accent); color: #fff; }
.btn-primary:hover:not(:disabled) { background: #0773c5; }
.btn-green { background: var(--green); color: #fff; }
.btn-green:hover:not(:disabled) { background: #009e7d; }
.btn-red { background: var(--red); color: #fff; }
.btn-red:hover:not(:disabled) { background: #c0392b; }
.btn-ghost { background: transparent; color: var(--muted); border: 1px solid var(--border); }
.btn-ghost:hover { color: var(--text); border-color: var(--text); }
.btn-row { display: flex; gap: 9px; justify-content: flex-end; margin-top: 14px; flex-wrap: wrap; }

/* Ø¦Ø§Ù„Û•Ø±Øª */
.alert { padding: 11px 15px; border-radius: 7px; font-size: 0.83rem; display: none; margin-top: 11px; border-right: 3px solid; line-height: 1.5; }
.alert.show { display: block; }
.alert.ok   { background: #00b89418; border-color: var(--green); color: var(--green); }
.alert.err  { background: #e1705518; border-color: var(--red);   color: var(--red); }
.alert.inf  { background: #0984e318; border-color: var(--accent); color: var(--accent); }

/* Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒ Ù„ÛŒØ³Øª */
.cat-row { display: flex; align-items: center; gap: 10px; background: var(--bg); border: 1px solid var(--border); border-radius: 8px; padding: 11px 15px; margin-bottom: 8px; }
.cat-row .lbl { flex: 1; }
.badge { font-family: var(--mono); font-size: 0.68rem; background: var(--border); padding: 3px 8px; border-radius: 4px; color: var(--yellow); }
.cnt   { font-family: var(--mono); font-size: 0.72rem; color: var(--muted); }

/* Ø¦Ø§Ø±Ø´ÛÙ */
.arc-item { display: flex; align-items: center; background: var(--bg); border: 1px solid var(--border); border-radius: 7px; padding: 9px 13px; gap: 10px; flex-wrap: wrap; margin-bottom: 8px; }
.arc-name { font-family: var(--mono); font-size: 0.76rem; color: var(--yellow); min-width: 200px; }
.arc-prev { font-size: 0.8rem; color: var(--muted); flex: 1; }

/* Ø³Û•ÛŒÚ¤ Ø¦Û†Ú¤Û•Ø±Ù„Û•ÛŒ */
.overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.75); z-index: 5000; align-items: center; justify-content: center; flex-direction: column; gap: 14px; }
.overlay.show { display: flex; }
.overlay p { color: var(--text); font-size: 0.95rem; }

/* Ù…Û†Ø¯Ø§Ù„ÛŒ Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒÚ©Ø±Ø¯Ù†ÛŒ ÙÛ†Ù†Øª */
.modal-backdrop {
    display: none; position: fixed; inset: 0;
    background: rgba(0,0,0,0.8); z-index: 4000;
    align-items: center; justify-content: center; padding: 16px;
}
.modal-backdrop.show { display: flex; }
.modal-box {
    background: var(--surface); border: 1px solid var(--border);
    border-radius: 14px; padding: 24px; width: 100%; max-width: 560px;
    max-height: 90vh; overflow-y: auto;
}
.modal-box h3 { font-size: 1rem; margin-bottom: 16px; color: var(--accent); }
.modal-footer { display: flex; gap: 9px; justify-content: flex-end; margin-top: 18px; flex-wrap: wrap; }

/* section divider */
.section-label { font-size: 0.7rem; color: var(--muted); font-family: var(--mono); letter-spacing: 0.08em; text-transform: uppercase; margin-bottom: 10px; padding-bottom: 6px; border-bottom: 1px solid var(--border); }

@media (max-width: 580px) {
    .form-grid { grid-template-columns: 1fr; }
    .form-group.full { grid-column: 1; }
    .tabs { gap: 2px; }
    .tab { font-size: 0.72rem; padding: 8px 3px; min-width: 60px; }
}
</style>
</head>
<body>

<!-- Ù„Û†Ø¯ÛŒÙ†Ú¯ -->
<div id="loading-screen">
    <div class="spinner"></div>
    <p style="color:var(--muted);font-size:0.88rem">Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†ÛŒ index.html Ù„Û• GitHub...</p>
</div>

<!-- Ø³ÛØªÛ•Ù¾ -->
<div id="setup-screen">
    <div class="setup-box">
        <h2>ğŸ” Connect to GitHub</h2>
        <p class="sub">The admin panel connects to your GitHub repo and reads/writes index.html automatically.</p>
        <div class="setup-steps">
            <strong>How to create a token (one time only):</strong><br>
            1. Go to <a href="https://github.com/settings/tokens/new" target="_blank">github.com/settings/tokens/new</a><br>
            2. Give it any name<br>
            3. Check <strong>repo</strong> (full repository access)<br>
            4. Click <strong>Generate token</strong><br>
            5. Copy the token and paste it below
        </div>
        <div class="setup-field">
            <label>GitHub Token (ghp_...)</label>
            <input type="password" id="setup-token" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx">
        </div>
        <div class="setup-field">
            <label>GitHub Username</label>
            <input type="text" id="setup-user" placeholder="uniqaidar">
        </div>
        <div class="setup-field">
            <label>Repository Name</label>
            <input type="text" id="setup-repo" placeholder="uniqaidar.github.io">
        </div>
        <div id="setup-alert" class="alert"></div>
        <div class="btn-row" style="margin-top:16px;">
            <button class="btn btn-primary" onclick="doSetup()">ğŸ”Œ Connect & Load âœ“</button>
        </div>
    </div>
</div>

<!-- Ù‡ÛØ¯Û•Ø± -->
<header>
    <h1>âš™ï¸ Ù¾Ø§Ù†ÛÙ„ÛŒ UniQaidar</h1>
    <div class="header-right">
        <span id="rbadge" class="repo-badge">Ù¾Û•ÛŒÙˆÛ•Ù†Ø¯ Ù†Û•Ú©Ø±Ø§ÙˆÛ•</span>
        <div id="sdot" class="status-dot"></div>
        <button class="btn btn-ghost" onclick="showSetup()" style="font-size:0.78rem;padding:6px 12px;">âš™ Ú¯Û†Ú•ÛŒÙ†</button>
    </div>
</header>

<!-- Ù†Ø§ÙˆÛ•Ú•Û†Ú© -->
<main>
    <div class="tabs">
        <button class="tab active" onclick="go('t-fonts',   this)">ğŸ”¤ Fonts</button>
        <button class="tab"        onclick="go('t-cats',    this)">ğŸ—‚ Categories</button>
        <button class="tab"        onclick="go('t-header',  this)">ğŸ”— Header</button>
        <button class="tab"        onclick="go('t-download',this)">â¬‡ Download</button>
        <button class="tab"        onclick="go('t-about',   this)">â„¹ About</button>
        <button class="tab"        onclick="go('t-seo',     this)">ğŸŒ SEO</button>
        <button class="tab"        onclick="go('t-arc',     this)">ğŸ“¦ Archive</button>
        <button class="tab"        onclick="go('t-ifont',   this)">ğŸ¨ Interface Font</button>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- TAB: ÙÛ†Ù†ØªÛ•Ú©Ø§Ù†                                         -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="t-fonts" class="tab-content active">
        <div class="box">
            <div class="box-header"><div class="dot" style="background:var(--accent)"></div> Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ ÙÛ†Ù†ØªÛŒ Ù†ÙˆÛ Ù„Û• UniQaidarFonts/</div>
            <div class="box-body">

                <div style="display:flex;align-items:center;gap:12px;margin-bottom:18px;flex-wrap:wrap">
                    <button class="btn btn-ghost" onclick="scanFonts()" id="scan-btn">ğŸ” Scan UniQaidarFonts folder</button>
                    <span id="scan-status" style="font-size:0.8rem;color:var(--muted);font-family:var(--mono)"></span>
                </div>

                <div class="form-grid">
                    <div class="form-group full">
                        <label>Ù‡Û•ÚµØ¨Ú˜ÛØ±Ù†ÛŒ ÙØ§ÛŒÙ„ÛŒ .ttf â€” ØªÛ•Ù†Ù‡Ø§ ÙÛ†Ù†ØªÛŒ Ù†ÙˆÛ Ú©Û• Ù„Û• ÙˆÛØ¨Ø³Ø§ÛŒØª Ù†ÛŒÛŒÛ• Ù†ÛŒØ´Ø§Ù† Ø¯Û•Ø¯Ø±ÛØª</label>
                        <select id="f-select" onchange="onFontSelect()" style="font-family:var(--mono);font-size:0.85rem">
                            <option value="">â€” ÛŒÛ•Ú©Û•Ù… Scan Ø¨Ú©Û• â€”</option>
                        </select>
                    </div>
                    <div class="form-group full">
                        <label>Ù†Ø§ÙˆÛŒ Ú©Ø§Ø±ØªÛŒ ÙÛ†Ù†Øª (Ø¦ÛŒÙ†Ú¯Ù„ÛŒØ²ÛŒ) â€” Ø¦Û•Ù…Û• Ù†Ø§ÙˆÛÚ©Û• Ú©Û• Ù„Û•Ø³Û•Ø± Ú©Ø§Ø±ØªÛ•Ú©Û• Ø¯Û•Ø±Ø¯Û•Ú©Û•ÙˆÛØªØŒ Ø¯Û•ØªÙˆØ§Ù†Ø±ÛØª Ø¬ÛŒØ§ÙˆØ§Ø² Ø¨ÛØª Ù„Û• Ù†Ø§ÙˆÛŒ ÙØ§ÛŒÙ„</label>
                        <input id="f-displayname" type="text" dir="ltr" placeholder="Ù…Û•Ø³Û•Ù„Û•Ù†: UniQAIDAR_MyFont 001" style="font-family:var(--mono);font-size:0.85rem;direction:ltr;">
                    </div>
                    <div class="form-group full">
                        <label>Ø¯Û•Ù‚ÛŒ Ù¾ÛŒØ´Ø§Ù†Ø¯Ø§Ù†</label>
                        <input id="f-prev" type="text" placeholder="ÙÛ†Ù†ØªÛ•Ú©Ø§Ù†ÛŒ ÛŒÙˆÙ†ÛŒâ€ŒÙ‚Û•ÛŒØ¯Ø§Ø± - ÙÛ†Ù†ØªÛŒ Ú©ÙˆØ±Ø¯ÛŒ" oninput="updateFontPreview()">
                    </div>
                    <div class="form-group full">
                        <label>Ù¾ÛŒØ´Ø§Ù†Ø¯Ø§Ù†ÛŒ Ú•Ø§Ø³ØªÛ•Ù‚ÛŒÙ†Û•</label>
                        <div id="live-preview-box" dir="rtl" style="
                            min-height:80px; background:#111; border:1px solid #333;
                            border-radius:8px; padding:14px 18px; font-size:2.2rem;
                            color:#f0f0f0; text-align:center; overflow:hidden;
                            display:flex; align-items:center; justify-content:center;
                            font-family: Tahoma, sans-serif;">
                            ÙÛ†Ù†ØªÛÚ© Ù‡Û•ÚµØ¨Ú˜ÛØ±Û• Ø¨Û† Ø¯Û•Ø±Ú©Û•ÙˆØªÙ†ÛŒ Ù¾Ø±ÛŒÚ¤ÛŒÙˆ
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Ø¨Û•Ø±ÙˆØ§Ø±ÛŒ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù† (YYYY-MM-DD)</label>
                        <input type="date" id="f-date" style="direction:ltr;color-scheme:dark;">
                    </div>
                    <div class="form-group">
                        <!-- spacer -->
                    </div>
                    <div class="form-group full">
                        <label>Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒÛ•Ú©Ø§Ù† â€” ÛŒÛ•Ú© ÛŒØ§Ù† Ø²ÛŒØ§ØªØ± Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•</label>
                        <div id="f-cat-pills" class="cat-pills" style="margin-top:6px;"></div>
                        <input type="hidden" id="f-cats">
                    </div>
                </div>

                <div id="fadd-alert" class="alert"></div>
                <div class="btn-row">
                    <button class="btn btn-ghost" onclick="clearFont()">Ù¾Ø§Ú©Ø±Ø¯Ù†Û•ÙˆÛ•</button>
                    <button id="fbtn" class="btn btn-primary" onclick="addFont()" disabled>ğŸ’¾ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù† Ùˆ Ù¾Û†Ø´Ú©Ø±Ø¯Ù† Ø¨Û† GitHub</button>
                </div>
            </div>
        </div>

        <div class="box">
            <div class="box-header"><div class="dot" style="background:var(--yellow)"></div> Ú¯Û•Ú•Ø§Ù† Ø¨Û•Ø¯ÙˆØ§ÛŒ ÙÛ†Ù†Øª Ø¨Û† Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒ / Ø³Ú•ÛŒÙ†Û•ÙˆÛ•</div>
            <div class="box-body">
                <div class="form-grid">
                    <div class="form-group full">
                        <label>Ú¯Û•Ú•Ø§Ù† Ø¨Û•Ø¯ÙˆØ§ÛŒ Ù†Ø§ÙˆÛŒ ÙÛ†Ù†Øª</label>
                        <input type="text" id="arc-search" placeholder="UniQAIDAR_..." oninput="renderArc()">
                    </div>
                </div>
                <div id="arc-list" style="margin-top:12px;max-height:420px;overflow-y:auto;display:flex;flex-direction:column;gap:6px;"></div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- TAB: Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒ                                         -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="t-cats" class="tab-content">
        <div class="box">
            <div class="box-header"><div class="dot" style="background:var(--green)"></div> Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒ Ù†ÙˆÛ</div>
            <div class="box-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Ù†Ø§ÙˆÛŒ Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒ (Ú©ÙˆØ±Ø¯ÛŒ/Ø¹Û•Ø±Û•Ø¨ÛŒ)</label>
                        <input type="text" id="new-cat-label" placeholder="ÙÛ†Ù†ØªÛŒ Ù†ÙˆÛ">
                    </div>
                    <div class="form-group">
                        <label>ID (Ø¦ÛŒÙ†Ú¯Ù„ÛŒØ²ÛŒØŒ Ø¨Û Ø¨Û†Ø´Ø§ÛŒÛŒ)</label>
                        <input type="text" id="new-cat-id" placeholder="Nwe">
                    </div>
                </div>
                <div id="cadd-alert" class="alert"></div>
                <div class="btn-row">
                    <button id="cbtn" class="btn btn-primary" onclick="addCat()" disabled>â• Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù† Ùˆ Ø³Û•ÛŒÚ¤</button>
                </div>
            </div>
        </div>

        <div class="box">
            <div class="box-header"><div class="dot" style="background:var(--yellow)"></div> Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒÛ•Ú©Ø§Ù†ÛŒ Ø¦ÛØ³ØªØ§</div>
            <div class="box-body">
                <div id="cat-list" style="display:flex;flex-direction:column;gap:6px;"></div>
                <div style="margin-top:12px;display:flex;gap:10px;align-items:center;">
                    <button class="btn btn-primary" onclick="saveReorder()" style="background:var(--accent)">
                        ğŸ’¾ Ø³Û•ÛŒÚ¤ÛŒ Ú•ÛŒØ²Ø¨Û•Ù†Ø¯ÛŒ Ù†ÙˆÛ Ø¨Û† GitHub
                    </button>
                    <div id="reorder-alert" class="alert" style="flex:1;margin-top:0;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- TAB: Ù‡ÛØ¯Û•Ø±                                            -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="t-header" class="tab-content">

        <div class="box">
            <div class="box-header"><div class="dot" style="background:var(--accent)"></div> Ù„ÛŒÙ†Ú©Û•Ú©Ø§Ù†ÛŒ Ø³Û†Ø´ÛŒØ§Ù„ Ù…ÛŒØ¯ÛŒØ§</div>
            <div class="box-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Ù„ÛŒÙ†Ú©ÛŒ ÙÛ•ÛŒØ³Ø¨ÙˆÙˆÚ©</label>
                        <input type="text" id="h-facebook" placeholder="https://web.facebook.com/...">
                    </div>
                    <div class="form-group">
                        <label>Ù„ÛŒÙ†Ú©ÛŒ ØªÛÙ„ÛÚ¯Ø±Ø§Ù…</label>
                        <input type="text" id="h-telegram" placeholder="https://t.me/...">
                    </div>
                </div>
                <div id="header-social-alert" class="alert"></div>
                <div class="btn-row">
                    <button id="header-social-btn" class="btn btn-primary" onclick="saveHeaderSocial()" disabled>ğŸ’¾ Ø³Û•ÛŒÚ¤</button>
                </div>
            </div>
        </div>

        <div class="box">
            <div class="box-header"><div class="dot" style="background:var(--green)"></div> Ù„Û†Ú¯Û† Ùˆ Ù„ÛŒÙ†Ú©ÛŒ Ø³Û•Ø±Û•Ú©ÛŒ</div>
            <div class="box-body">
                <div class="form-grid">
                    <div class="form-group full">
                        <label>Ù„ÛŒÙ†Ú©ÛŒ Ù„Û†Ú¯Û† (Ú©Ù„ÛŒÚ© Ù„Û•Ø³Û•Ø± Ù„Û†Ú¯Û† Ø¯Û•Ø¨Ø§Øª Ø¨Û† Ú©ÙˆÛ)</label>
                        <input type="text" id="h-logo-url" placeholder="https://uniqaidar.pages.dev">
                    </div>
                </div>
                <div id="header-logo-alert" class="alert"></div>
                <div class="btn-row">
                    <button id="header-logo-btn" class="btn btn-primary" onclick="saveHeaderLogo()" disabled>ğŸ’¾ Ø³Û•ÛŒÚ¤</button>
                </div>
            </div>
        </div>

        <div class="box">
            <div class="box-header"><div class="dot" style="background:var(--yellow)"></div> Ø¨Ø§Ú©Ø³ÛŒ Ú¯Û•Ú•Ø§Ù† (Search Box)</div>
            <div class="box-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label>placeholder â€” Ø¯ÛØ³Ú©ØªÛ†Ù¾</label>
                        <input type="text" id="h-search-desktop" placeholder="Ù„ÛØ±Û•Ø¯Ø§ Ø¨Ù†ÙˆÙˆØ³Û• Ø¨Û† ØªØ§Ù‚ÛŒÚ©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ ÙÛ†Ù†ØªÛ•Ú©Ø§Ù†...">
                    </div>
                    <div class="form-group">
                        <label>placeholder â€” Ù…Û†Ø¨Ø§ÛŒÙ„</label>
                        <input type="text" id="h-search-mobile" placeholder="Ù„ÛØ±Û•Ø¯Ø§ Ø¨Ù†ÙˆÙˆØ³Û• Ø¨Û† ØªØ§Ù‚ÛŒÚ©Ø±Ø¯Ù†Û•ÙˆÛ•ÛŒ ÙÛ†Ù†Øª...">
                    </div>
                </div>
                <div id="header-search-alert" class="alert"></div>
                <div class="btn-row">
                    <button id="header-search-btn" class="btn btn-primary" onclick="saveHeaderSearch()" disabled>ğŸ’¾ Ø³Û•ÛŒÚ¤</button>
                </div>
            </div>
        </div>

        <div class="box">
            <div class="box-header"><div class="dot" style="background:var(--purple)"></div> Ø¨Ø§Ø±Û•ÛŒ Ù‚Û•Ø¨Ø§Ø±Û•ÛŒ ÙÛ†Ù†Øª</div>
            <div class="box-body">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Ø¯Û•Ù‚ÛŒ Ù„Û•ÛŒØ¨Úµ</label>
                        <input type="text" id="h-sizebar-label" placeholder="Ù‚Û•Ø¨Ø§Ø±Û•ÛŒ ÙÛ†Ù†Øª:">
                    </div>
                    <div class="form-group">
                        <label>Ø¯Û•Ù‚ÛŒ Ø¯ÙˆÚ¯Ù…Û•ÛŒ Ú•ÛŒØ³ÛØª</label>
                        <input type="text" id="h-sizebar-reset" placeholder="Ú•ÛŒØ³ÛØª">
                    </div>
                    <div class="form-group">
                        <label>Ú©Û•Ù…ØªØ±ÛŒÙ† Ù‚Û•Ø¨Ø§Ø±Û• (min)</label>
                        <input type="number" id="h-sizebar-min" placeholder="14">
                    </div>
                    <div class="form-group">
                        <label>Ø²Û†Ø±ØªØ±ÛŒÙ† Ù‚Û•Ø¨Ø§Ø±Û• (max)</label>
                        <input type="number" id="h-sizebar-max" placeholder="80">
                    </div>
                    <div class="form-group">
                        <label>Ù‚Û•Ø¨Ø§Ø±Û•ÛŒ Ù¾ÛØ´Ú¯Ø±ØªÙˆÙˆ (default)</label>
                        <input type="number" id="h-sizebar-default" placeholder="32">
                    </div>
                </div>
                <div id="header-sizebar-alert" class="alert"></div>
                <div class="btn-row">
                    <button id="header-sizebar-btn" class="btn btn-primary" onclick="saveHeaderSizebar()" disabled>ğŸ’¾ Ø³Û•ÛŒÚ¤</button>
                </div>
            </div>
        </div>

        <div class="box">
            <div class="box-header"><div class="dot" style="background:var(--red)"></div> ÙÙˆÙˆØªÛ•Ø±</div>
            <div class="box-body">
                <div class="form-group">
                    <label>Ø¯Û•Ù‚ÛŒ ÙÙˆÙˆØªÛ•Ø± (HTML Ù¾Ø´ØªÛŒÙˆØ§Ù†ÛŒ Ø¯Û•Ú©Ø§Øª)</label>
                    <input type="text" id="h-footer" placeholder="Designed and Developed by <strong>Qaidar Rahim</strong> | Â© 2026 All Rights Reserved.">
                </div>
                <div id="header-footer-alert" class="alert"></div>
                <div class="btn-row">
                    <button id="header-footer-btn" class="btn btn-primary" onclick="saveFooter()" disabled>ğŸ’¾ Ø³Û•ÛŒÚ¤</button>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- TAB: Ø¯Ø§Ú¯Ø±ØªÙ†                                           -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="t-download" class="tab-content">
        <div class="box">
            <div class="box-header"><div class="dot" style="background:var(--accent)"></div> Ù…Û†Ø¯Ø§Ù„ÛŒ Ø¯Ø§Ú¯Ø±ØªÙ†</div>
            <div class="box-body">
                <div class="section-label">Ø¯ÙˆÚ¯Ù…Û•ÛŒ Ù‡ÛØ¯Û•Ø±</div>
                <div class="form-grid">
                    <div class="form-group full">
                        <label>Ø¯Û•Ù‚ÛŒ Ø¯ÙˆÚ¯Ù…Û•ÛŒ Ù‡ÛØ¯Û•Ø± (Ø¯Ø§Ú¯Ø±ØªÙ†ÛŒ ØªÛ•ÙˆØ§ÙˆÛŒ ÙÛ†Ù†ØªÛ•Ú©Ø§Ù†)</label>
                        <input type="text" id="dm-header-btn-inp" placeholder="Ø¯Ø§Ú¯Ø±ØªÙ†ÛŒ ØªÛ•ÙˆØ§ÙˆÛŒ ÙÛ†Ù†ØªÛ•Ú©Ø§Ù†">
                    </div>
                </div>

                <div class="section-label" style="margin-top:18px;">Ù†Ø§ÙˆÛ•Ú•Û†Ú©ÛŒ Ù…Û†Ø¯Ø§Ù„</div>
                <div class="form-grid">
                    <div class="form-group full">
                        <label>Ø³Û•Ø±Ø¯ÛÚ•ÛŒ Ù…Û†Ø¯Ø§Ù„</label>
                        <input type="text" id="dm-title-inp" placeholder="Ø¯Ø§Ú¯Ø±ØªÙ†ÛŒ ØªÛ•ÙˆØ§ÙˆÛŒ ÙÛ†Ù†ØªÛ•Ú©Ø§Ù†">
                    </div>
                    <div class="form-group full">
                        <label>Ø¯Û•Ù‚ÛŒ ÙˆÛ•Ø³Ù</label>
                        <input type="text" id="dm-desc-inp" placeholder="ÙÛ•Ø±Ù…ÙˆÙˆ Ù„Û•Ú¯Û•Úµ Ø¯Ø§Ú¯Ø±ØªÙ†ÛŒ...">
                    </div>
                </div>

                <div class="section-label" style="margin-top:18px;">Ø¯ÙˆÚ¯Ù…Û•ÛŒ Google Drive</div>
                <div class="form-grid">
                    <div class="form-group full">
                        <label>Ù„ÛŒÙ†Ú©ÛŒ Ø¯Ø§Ú¯Ø±ØªÙ† (Google Drive)</label>
                        <input type="text" id="dl-url" placeholder="https://drive.google.com/uc?export=download&id=...">
                    </div>
                    <div class="form-group full">
                        <label>Ø¯Û•Ù‚ÛŒ Ø¯ÙˆÚ¯Ù…Û•ÛŒ Ø¯Ø§Ú¯Ø±ØªÙ† (Google Drive)</label>
                        <input type="text" id="dm-btn-inp" placeholder="ÙƒÙ„ÛŒÙƒ Ø¨ÙƒÙ‡â€Œ Ø¨Û† Ø¯Ø§Ú¯Ø±ØªÙ†ÛŒ ØªÛ•ÙˆØ§ÙˆÛŒ ÙÛ†Ù†ØªÙ‡â€ŒÙƒØ§Ù†">
                    </div>
                </div>

                <div class="section-label" style="margin-top:18px;">Ø¯ÙˆÚ¯Ù…Û•ÛŒ Ø¯Ø§Ú¯Ø±ØªÙ†ÛŒ Ú•Ø§Ø³ØªÛ•ÙˆØ®Û†</div>
                <div class="form-grid">
                    <div class="form-group full">
                        <label>Ø¯Û•Ù‚ÛŒ Ø¯ÙˆÚ¯Ù…Û•ÛŒ Ø¯Ø§Ú¯Ø±ØªÙ†ÛŒ Ú•Ø§Ø³ØªÛ•ÙˆØ®Û† (Ø¨Û Ú¯ÙˆÙˆÚ¯Úµ Ø¯Ø±Ø§ÛŒÚ¤)</label>
                        <input type="text" id="dm-direct-inp" placeholder="Ø¯Ø§Ú¯Ø±ØªÙ†ÛŒ Ú•Ø§Ø³ØªÛ•ÙˆØ®Û† Ø¨Û•Ø¨Û Ú¯ÙˆÙˆÚ¯Úµ Ø¯Ø±Ø§ÛŒÚ¤">
                    </div>
                </div>

                <div id="dl-alert" class="alert"></div>
                <div class="btn-row">
                    <button id="dl-btn" class="btn btn-primary" onclick="saveDownloadModal()" disabled>ğŸ’¾ Ø³Û•ÛŒÚ¤</button>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- TAB: Ø¯Û•Ø±Ø¨Ø§Ø±Û•                                          -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="t-about" class="tab-content">
        <div class="box">
            <div class="box-header"><div class="dot" style="background:var(--accent)"></div> Ù…Û†Ø¯Ø§Ù„ÛŒ Ø¯Û•Ø±Ø¨Ø§Ø±Û•ÛŒ Ù¾Ú•Û†Ú˜Û•</div>
            <div class="box-body">

                <div class="section-label">Ø³Û•Ø±Ø¯ÛÚ• Ùˆ Ø¯Û•Ù‚ÛŒ Ø³Û•Ø±Û•Ú©ÛŒ</div>
                <div class="form-grid">
                    <div class="form-group full">
                        <label>Ø³Û•Ø±Ø¯ÛÚ•ÛŒ Ù…Û†Ø¯Ø§Ù„</label>
                        <input type="text" id="about-title-inp" placeholder="Ø¯Û•Ø±Ø¨Ø§Ø±Û•ÛŒ Ù¾Ú•Û†Ú˜Û•">
                    </div>
                    <div class="form-group full">
                        <label>Ø¯Û•Ù‚ÛŒ Ø³Û•Ø±Û•Ú©ÛŒ (Ø¯ÛŒØ§Ø±ÛŒÚ©Ø±Ø¯Ù†ÛŒ Ù¾Ú•Û†Ú˜Û•)</label>
                        <textarea id="about-text" rows="4" placeholder="ÙÛ†Ù†ØªÛ•Ú©Ø§Ù†ÛŒ ÛŒÙˆÙ†ÛŒâ€ŒÙ‚Û•ÛŒØ¯Ø§Ø±..."></textarea>
                    </div>
                </div>

                <div class="section-label" style="margin-top:18px;">Ø¨Û•Ø´ÛŒ ØªØ§ÛŒØ¨Û•ØªÙ…Û•Ù†Ø¯ÛŒÛŒÛ•Ú©Ø§Ù†</div>
                <div class="form-grid">
                    <div class="form-group full">
                        <label>Ø³Û•Ø±Ø¯ÛÚ•ÛŒ Ø¨Û•Ø´ÛŒ ØªØ§ÛŒØ¨Û•ØªÙ…Û•Ù†Ø¯ÛŒÛŒÛ•Ú©Ø§Ù†</label>
                        <input type="text" id="about-features-title-inp" placeholder="âœ¦ ØªØ§ÛŒØ¨Û•ØªÙ…Û•Ù†Ø¯ÛŒÛŒÛ• Ø³Û•Ø±Û•Ú©ÛŒÛŒÛ•Ú©Ø§Ù†">
                    </div>
                    <div class="form-group">
                        <label>Ø¦Ø§ÛŒÚ©Û†Ù†ÛŒ ØªØ§ÛŒØ¨Û•ØªÙ…Û•Ù†Ø¯ÛŒ Ù¡</label>
                        <input type="text" id="about-feat1-icon-inp" placeholder="ğŸ¨">
                    </div>
                    <div class="form-group">
                        <label>Ø¯Û•Ù‚ÛŒ ØªØ§ÛŒØ¨Û•ØªÙ…Û•Ù†Ø¯ÛŒ Ù¡</label>
                        <input type="text" id="about-feat1-text-inp" placeholder="Ú¯ÙˆÙ†Ø¬Ø§Ùˆ Ø¨Û† Ú¯Ø´Øª Ø¨ÙˆØ§Ø±Û•Ú©Ø§Ù†:...">
                    </div>
                    <div class="form-group">
                        <label>Ø¦Ø§ÛŒÚ©Û†Ù†ÛŒ ØªØ§ÛŒØ¨Û•ØªÙ…Û•Ù†Ø¯ÛŒ Ù¢</label>
                        <input type="text" id="about-feat2-icon-inp" placeholder="âœ’ï¸">
                    </div>
                    <div class="form-group">
                        <label>Ø¯Û•Ù‚ÛŒ ØªØ§ÛŒØ¨Û•ØªÙ…Û•Ù†Ø¯ÛŒ Ù¢</label>
                        <input type="text" id="about-feat2-text-inp" placeholder="Ø³Û•Ø±Ù†Ø¬Ú•Ø§Ú©ÛØ´ Ùˆ Ú•ÛÚ©:...">
                    </div>
                    <div class="form-group">
                        <label>Ø¦Ø§ÛŒÚ©Û†Ù†ÛŒ ØªØ§ÛŒØ¨Û•ØªÙ…Û•Ù†Ø¯ÛŒ Ù£</label>
                        <input type="text" id="about-feat3-icon-inp" placeholder="ğŸŒ">
                    </div>
                    <div class="form-group">
                        <label>Ø¯Û•Ù‚ÛŒ ØªØ§ÛŒØ¨Û•ØªÙ…Û•Ù†Ø¯ÛŒ Ù£</label>
                        <input type="text" id="about-feat3-text-inp" placeholder="Ù¾Ø´ØªÛŒÙˆØ§Ù†ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ú©ÙˆØ±Ø¯ÛŒ:...">
                    </div>
                    <div class="form-group">
                        <label>Ø¦Ø§ÛŒÚ©Û†Ù†ÛŒ ØªØ§ÛŒØ¨Û•ØªÙ…Û•Ù†Ø¯ÛŒ Ù¤</label>
                        <input type="text" id="about-feat4-icon-inp" placeholder="ğŸ†">
                    </div>
                    <div class="form-group">
                        <label>Ø¯Û•Ù‚ÛŒ ØªØ§ÛŒØ¨Û•ØªÙ…Û•Ù†Ø¯ÛŒ Ù¤</label>
                        <input type="text" id="about-feat4-text-inp" placeholder="Ø¦Û•Ù… ÙÛ†Ù†ØªØ§Ù†Û• ÛŒØ§Ø±Ù…Û•ØªÛŒØ¯Û•Ø±Ù†...">
                    </div>
                </div>

                <div class="section-label" style="margin-top:18px;">Ø¨Û•Ø´ÛŒ Ø¯ÙˆÙˆÛ•Ù… (ÙÙˆÙˆØªÛ•Ø±ÛŒ Ù…Û†Ø¯Ø§Ù„)</div>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Ø¯Û•Ù‚ÛŒ Ø¨Û•Ø±ÙˆØ§Ø±ÛŒ Ø¯Û•Ø³ØªÙ¾ÛÚ©Ø±Ø¯Ù†</label>
                        <input type="text" id="about-launch-inp" placeholder="ğŸ—“ ÛŒÛ•Ú©Û•Ù… Ú¯ÙˆØ±Ø²Û•: Ù…Ø§Ù†Ú¯ÛŒ Ø¦Ø§Ø¨ÛŒ Ø³Ø§ÚµÛŒ Ù¢Ù Ù Ù©">
                    </div>
                    <div class="form-group">
                        <label>Ø¯Û•Ù‚ÛŒ Ú¯Û•Ø´Û•Ù¾ÛØ¯Û•Ø±</label>
                        <input type="text" id="about-dev-inp" placeholder="Ú¯Û•Ø´Û•Ù¾ÛØ¯Û•Ø±: Ù‚Û•ÛŒØ¯Ø§Ø± Ú•Û•Ø­ÛŒÙ…">
                    </div>
                </div>

                <div id="about-alert" class="alert"></div>
                <div class="btn-row">
                    <button id="about-btn" class="btn btn-primary" onclick="saveAbout()" disabled>ğŸ’¾ Ø³Û•ÛŒÚ¤</button>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- TAB: SEO                                              -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="t-seo" class="tab-content">
        <div class="box">
            <div class="box-header"><div class="dot" style="background:var(--green)"></div> SEO Ùˆ Ù…ÛØªØ§</div>
            <div class="box-body">
                <div class="section-label">Ø³Û•Ø±Ø¯ÛÚ• Ùˆ ÙˆÛ•Ø³ÙÛŒ Ù¾Û•Ú•Û•</div>
                <div class="form-grid">
                    <div class="form-group full">
                        <label>Title (title tag)</label>
                        <input type="text" id="seo-title" placeholder="UniQaidar Fonts | ÙÛ†Ù†ØªÛ•Ú©Ø§Ù†ÛŒ ÛŒÙˆÙ†ÛŒ Ù‚Û•ÛŒØ¯Ø§Ø±">
                    </div>
                    <div class="form-group full">
                        <label>Meta Description</label>
                        <textarea id="seo-desc" rows="2" placeholder="Ú¯Û•ÙˆØ±Û•ØªØ±ÛŒÙ† Ú©Û†Ú©Ø±Ø§ÙˆÛ•ÛŒ ÙÛ†Ù†ØªÛŒ Ú©ÙˆØ±Ø¯ÛŒ..."></textarea>
                    </div>
                    <div class="form-group full">
                        <label>Meta Keywords</label>
                        <textarea id="seo-keywords" rows="2" placeholder="ÙÛ†Ù†ØªÛŒ Ú©ÙˆØ±Ø¯ÛŒ, kurdish fonts, ..."></textarea>
                    </div>
                </div>

                <div class="section-label" style="margin-top:18px;">Open Graph (Ø³Û†Ø´ÛŒØ§Ù„ Ù…ÛŒØ¯ÛŒØ§ Ø´ÛØ±)</div>
                <div class="form-grid">
                    <div class="form-group full">
                        <label>OG Title</label>
                        <input type="text" id="seo-og-title" placeholder="UniQaidar Fonts - Ø¯Ø§Ú¯Ø±ØªÙ†ÛŒ ÙÛ†Ù†ØªÛŒ Ú©ÙˆØ±Ø¯ÛŒ Ø¨Û• Ø®Û†Ú•Ø§ÛŒÛŒ">
                    </div>
                    <div class="form-group full">
                        <label>OG Description</label>
                        <input type="text" id="seo-og-desc" placeholder="Browse, test, and download over 420 free Kurdish and Arabic fonts instantly.">
                    </div>
                    <div class="form-group">
                        <label>OG Image URL</label>
                        <input type="text" id="seo-og-image" placeholder="https://uniqaidar.pages.dev/Logo.png">
                    </div>
                    <div class="form-group">
                        <label>OG URL</label>
                        <input type="text" id="seo-og-url" placeholder="https://uniqaidar.pages.dev/">
                    </div>
                </div>

                <div class="section-label" style="margin-top:18px;">Google Analytics</div>
                <div class="form-grid">
                    <div class="form-group full">
                        <label>Google Analytics ID (G-XXXXXXXXXX)</label>
                        <input type="text" id="seo-ga-id" placeholder="G-44N8KGCV21">
                    </div>
                </div>

                <div id="seo-alert" class="alert"></div>
                <div class="btn-row">
                    <button id="seo-btn" class="btn btn-primary" onclick="saveSEO()" disabled>ğŸ’¾ Ø³Û•ÛŒÚ¤</button>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- TAB: Ø¦Ø§Ø±Ø´ÛÙ                                           -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="t-arc" class="tab-content">
        <div class="box">
            <div class="box-header"><div class="dot" style="background:var(--yellow)"></div> Ù‡Û•Ù…ÙˆÙˆ ÙÛ†Ù†ØªÛ•Ú©Ø§Ù† (<span id="arc-count">0</span>)</div>
            <div class="box-body">
                <div style="display:flex;gap:10px;margin-bottom:13px;flex-wrap:wrap;align-items:center;">
                    <input id="arc-full-search" type="text" placeholder="Ú¯Û•Ú•Ø§Ù† Ø¨Û•Ø¯ÙˆØ§ÛŒ Ù†Ø§ÙˆÛŒ ÙÛ†Ù†Øª..." oninput="renderArcFull()" style="max-width:260px;">
                    <select id="arc-full-cat" onchange="renderArcFull()" style="max-width:200px;">
                        <option value="all">Ù‡Û•Ù…ÙˆÙˆ Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒÛ•Ú©Ø§Ù†</option>
                    </select>
                    <span id="arc-filtered-count" style="color:var(--muted);font-size:0.78rem;font-family:var(--mono);"></span>
                </div>
                <div id="arc-full-list" style="max-height:500px;overflow-y:auto;display:flex;flex-direction:column;gap:6px;"></div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <!-- TAB: Interface Font                                    -->
    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div id="t-ifont" class="tab-content">
        <div class="box">
            <div class="box-header"><div class="dot" style="background:var(--purple)"></div> Website Interface Font</div>
            <div class="box-body">
                <p style="font-size:0.83rem;color:var(--muted);margin-bottom:16px;line-height:1.8;">
                    This controls the font used for the entire website interface (header, buttons, search box, modals, footer, etc.).<br>
                    The font must already exist in your <code style="color:var(--yellow);font-family:var(--mono)">UniQaidarFonts/</code> folder.
                    Currently: <strong id="ifont-current" style="color:var(--green);font-family:var(--mono)">UniQAIDAR_Peregraf 01</strong>
                </p>
                <div class="form-grid">
                    <div class="form-group full">
                        <label>Select from existing fonts in website</label>
                        <select id="ifont-select" style="font-family:var(--mono);font-size:0.85rem;direction:ltr;" onchange="previewInterfaceFont()">
                            <option value="">â€” loading... â€”</option>
                        </select>
                    </div>
                    <div class="form-group full">
                        <label>Live Preview (interface font applied below)</label>
                        <div id="ifont-preview-box" style="
                            background:#111;border:1px solid #333;border-radius:8px;
                            padding:16px 20px;font-size:1.4rem;color:#f0f0f0;
                            line-height:2;direction:rtl;">
                            <span id="ifont-preview-text">ÙÛ†Ù†ØªÛÚ© Ù‡Û•ÚµØ¨Ú˜ÛØ±Û• Ø¨Û† Ø¯Û•Ø±Ú©Û•ÙˆØªÙ†ÛŒ Ù¾Ø±ÛŒÚ¤ÛŒÙˆ â€” UniQaidar Fonts | ÙÛ†Ù†ØªÛŒ Ú©ÙˆØ±Ø¯ÛŒ</span>
                        </div>
                    </div>
                </div>
                <div id="ifont-alert" class="alert"></div>
                <div class="btn-row">
                    <button id="ifont-btn" class="btn btn-primary" onclick="saveInterfaceFont()" disabled>ğŸ’¾ Save Interface Font to GitHub</button>
                </div>
            </div>
        </div>
    </div>

</main>

<!-- Ø¦Û†Ú¤Û•Ø±Ù„Û•ÛŒ Ø³Û•ÛŒÚ¤ Ú©Ø±Ø¯Ù† -->
<div id="overlay" class="overlay">
    <div class="spinner"></div>
    <p id="overlay-msg">Ø³Û•ÛŒÚ¤ Ø¯Û•Ú©Ø±ÛØª...</p>
</div>

<!-- Ù…Û†Ø¯Ø§Ù„ÛŒ Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒÚ©Ø±Ø¯Ù† -->
<div id="edit-modal" class="modal-backdrop">
    <div class="modal-box">
        <h3>âœï¸ Ø¯Û•Ø³ØªÚ©Ø§Ø±ÛŒÚ©Ø±Ø¯Ù†ÛŒ ÙÛ†Ù†Øª</h3>
        <input type="hidden" id="edit-orig-name">
        <input type="hidden" id="edit-path">
        <div class="form-grid">
            <div class="form-group full">
                <label>Font File Name (readonly â€” don't change)</label>
                <input type="text" id="edit-name" dir="ltr" style="font-family:var(--mono);font-size:0.85rem;direction:ltr;" readonly>
            </div>
            <div class="form-group full">
                <label>Display Name on Card (what visitors see)</label>
                <input type="text" id="edit-displayname" dir="ltr" style="font-family:var(--mono);font-size:0.85rem;direction:ltr;" placeholder="Ù…Û•Ø³Û•Ù„Û•Ù†: UniQAIDAR_MyFont 001">
            </div>
            <div class="form-group">
                <label>Ù†Ø§ÙˆÛŒ ÙØ§ÛŒÙ„</label>
                <input type="text" id="edit-file" dir="ltr" style="font-family:var(--mono);font-size:0.85rem;direction:ltr;" readonly>
            </div>
            <div class="form-group">
                <label>Ø¨Û•Ø±ÙˆØ§Ø±ÛŒ Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù† (YYYY-MM-DD)</label>
                <input type="date" id="edit-date" style="direction:ltr;color-scheme:dark;">
            </div>
            <div class="form-group full">
                <label>Ø¯Û•Ù‚ÛŒ Ù¾ÛØ´Ø¨ÛŒÙ†ÛŒ</label>
                <input type="text" id="edit-preview">
            </div>
            <div class="form-group full">
                <label>Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒÛ•Ú©Ø§Ù† â€” ÛŒÛ•Ú© ÛŒØ§Ù† Ø²ÛŒØ§ØªØ± Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•</label>
                <div id="edit-cat-pills" class="cat-pills" style="margin-top:6px;"></div>
                <input type="hidden" id="edit-cats">
            </div>
        </div>
        <div id="edit-alert" class="alert"></div>
        <div class="modal-footer">
            <button class="btn btn-ghost" onclick="closeEditModal()">Ú©Ø§Ù†Ø³Úµ</button>
            <button class="btn btn-primary" onclick="saveEditFont()">ğŸ’¾ Ø³Û•ÛŒÚ¤</button>
        </div>
    </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Config & State
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let TOKEN='', USER='', REPO='', BRANCH='main', FILE='index.html';
let SHA='', RAW='', fnts=[], cats=[], ready=false;

const LS_KEY = 'uqadmin_cfg';

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Init
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
window.addEventListener('DOMContentLoaded', async () => {
    const saved = localStorage.getItem(LS_KEY);
    if (saved) {
        try {
            const c = JSON.parse(saved);
            TOKEN=c.token; USER=c.user; REPO=c.repo;
            BRANCH=c.branch||'main'; FILE=c.file||'index.html';
        } catch(e){}
    }
    if (TOKEN && USER && REPO) {
        const ok = await loadIndex();
        if (ok) { setReady(true); hideLoading(); }
        else     { hideLoading(); showSetup(); }
    } else {
        hideLoading(); showSetup();
    }
});

function hideLoading() { document.getElementById('loading-screen').style.display='none'; }
function showSetup()   { document.getElementById('setup-screen').style.display='flex'; }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Auto-detect branch and index.html path
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function autoDetect(token, user, repo) {
    const headers = { Authorization:`token ${token}`, Accept:'application/vnd.github.v3+json' };

    // Step 1: get default branch from repo info
    let branch = 'main';
    try {
        const r = await fetch(`https://api.github.com/repos/${user}/${repo}`, { headers });
        if (r.ok) {
            const d = await r.json();
            branch = d.default_branch || 'main';
        }
    } catch(e) {}

    // Step 2: scan the repo tree for index.html
    let file = 'index.html'; // fallback
    try {
        const r = await fetch(`https://api.github.com/repos/${user}/${repo}/git/trees/${branch}?recursive=1`, { headers });
        if (r.ok) {
            const d = await r.json();
            const found = (d.tree || []).find(item =>
                item.type === 'blob' && item.path.toLowerCase().endsWith('index.html')
            );
            if (found) file = found.path;
        }
    } catch(e) {}

    return { branch, file };
}

async function doSetup() {
    TOKEN = document.getElementById('setup-token').value.trim();
    USER  = document.getElementById('setup-user').value.trim();
    REPO  = document.getElementById('setup-repo').value.trim();
    const al = document.getElementById('setup-alert');
    if (!TOKEN||!USER||!REPO) return alert2(al,'ØªÚ©Ø§ÛŒÛ• Ù‡Û•Ù…ÙˆÙˆ Ø®Ø§Ù†Û•Ú©Ø§Ù† Ù¾Ú• Ø¨Ú©Û•Ø±Û•ÙˆÛ•!','err');

    alert2(al,'ğŸ” Ø¯Û†Ø²ÛŒÙ†Û•ÙˆÛ•ÛŒ Ø¦Û†ØªÛ†Ù…Ø§ØªÛŒÚ©ÛŒ ÙØ§ÛŒÙ„ Ù„Û• GitHub...','inf');

    const detected = await autoDetect(TOKEN, USER, REPO);
    BRANCH = detected.branch;
    FILE   = detected.file;

    alert2(al,`ğŸ“‚ Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•: ${FILE} (branch: ${BRANCH}) â€” Ù¾Û•ÛŒÙˆÛ•Ù†Ø¯ÛŒÚ©Ø±Ø¯Ù†...`,'inf');

    const ok = await loadIndex();
    if (ok) {
        localStorage.setItem(LS_KEY, JSON.stringify({token:TOKEN,user:USER,repo:REPO,branch:BRANCH,file:FILE}));
        document.getElementById('setup-screen').style.display='none';
        setReady(true);
    } else {
        alert2(al,`âŒ Ù¾Û•ÛŒÙˆÛ•Ù†Ø¯ÛŒ Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ† ÛŒØ§Ù† Ù†Ø§ÙˆÛŒ Ú•ÛŒÙ¾Û† Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•! (${FILE} / ${BRANCH})`,'err');
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GitHub API
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function ghGet() {
    const r = await fetch(`https://api.github.com/repos/${USER}/${REPO}/contents/${FILE}?ref=${BRANCH}`,
        { headers:{ Authorization:`token ${TOKEN}`, Accept:'application/vnd.github.v3+json' }});
    if (!r.ok) return null;
    return r.json();
}

async function ghPut(content, message) {
    const body = JSON.stringify({ message, content: btoa(unescape(encodeURIComponent(content))), sha: SHA, branch: BRANCH });
    const r = await fetch(`https://api.github.com/repos/${USER}/${REPO}/contents/${FILE}`,
        { method:'PUT', headers:{ Authorization:`token ${TOKEN}`, Accept:'application/vnd.github.v3+json', 'Content-Type':'application/json' }, body });
    if (!r.ok) return false;
    const d = await r.json();
    SHA = d.content.sha;
    RAW = content;
    return true;
}

async function loadIndex() {
    try {
        const d = await ghGet();
        if (!d) return false;
        SHA = d.sha;
        RAW = decodeURIComponent(escape(atob(d.content.replace(/\n/g,''))));
        parseFonts();
        parseCats();
        buildCatPills();
        buildCatList();
        buildArcSel();
        renderArc();
        renderArcFull();
        buildInterfaceFontSelect();
        return true;
    } catch(e){ console.error(e); return false; }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Parse
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function parseFonts() {
    fnts = [];
    // Match any font object in the array â€” capture the entire object content
    const rx = /\{\s*name:\s*"([^"]+)"([\s\S]*?)\}/g;
    let m;
    while ((m = rx.exec(RAW)) !== null) {
        const body = m[0];
        // Only process if it looks like a font entry (has 'file:' or 'path:')
        if (!body.includes('file:') && !body.includes('path:')) continue;
        const nameM    = body.match(/name:\s*"([^"]*)"/);
        const fileM    = body.match(/file:\s*"([^"]*)"/);
        const pathM    = body.match(/path:\s*"([^"]*)"/);
        const prevM    = body.match(/preview:\s*"([^"]*)"/);
        const dateM    = body.match(/dateAdded:\s*"([^"]*)"/);
        const dnM      = body.match(/displayName:\s*"([^"]*)"/);
        const catM     = body.match(/category:\s*(\[[^\]]*\]|"[^"]*")/);
        if (!nameM || !fileM) continue;
        let cats_arr = [];
        if (catM) {
            const cats_raw = catM[1].trim();
            if (cats_raw.startsWith('[')) {
                cats_arr = cats_raw.replace(/[\[\]"'\s]/g,'').split(',').filter(Boolean);
            } else {
                cats_arr = [cats_raw.replace(/["']/g,'').trim()];
            }
        }
        fnts.push({
            name:        nameM ? nameM[1] : '',
            file:        fileM ? fileM[1] : '',
            path:        pathM ? pathM[1] : (fileM ? `UniQaidarFonts/${fileM[1]}.ttf` : ''),
            category:    cats_arr,
            preview:     prevM ? prevM[1] : '',
            dateAdded:   dateM ? dateM[1] : '',
            displayName: dnM   ? dnM[1]   : ''
        });
    }
}

function parseCats() {
    cats = [];
    const rx = /<button class="filter-btn" onclick="filterFonts\('([^']+)',\s*this\)">([^<]+)<\/button>/g;
    let m;
    while ((m = rx.exec(RAW)) !== null) {
        cats.push({ id: m[1], label: m[2].trim() });
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Category Pills (for font add/edit forms)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildCatPills() {
    ['f-cat-pills','edit-cat-pills'].forEach(containerId => {
        const el = document.getElementById(containerId);
        if (!el) return;
        el.innerHTML = '';
        cats.forEach(c => {
            const btn = document.createElement('button');
            btn.type = 'button';
            btn.className = 'cat-pill';
            btn.textContent = c.label;
            btn.dataset.id = c.id;
            btn.onclick = () => {
                btn.classList.toggle('on');
                syncCatInput(containerId);
            };
            el.appendChild(btn);
        });
    });
}

function syncCatInput(pillsId) {
    const container = document.getElementById(pillsId);
    const selected = [...container.querySelectorAll('.cat-pill.on')].map(b=>b.dataset.id);
    const inputId = pillsId === 'f-cat-pills' ? 'f-cats' : 'edit-cats';
    document.getElementById(inputId).value = selected.join(',');
}

function setPills(pillsId, catArr) {
    const container = document.getElementById(pillsId);
    container.querySelectorAll('.cat-pill').forEach(b => {
        b.classList.toggle('on', catArr.includes(b.dataset.id));
    });
    syncCatInput(pillsId);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Category List
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildCatList() {
    const el = document.getElementById('cat-list');
    if (!el) return;
    el.innerHTML = '';
    cats.forEach((c,i) => {
        const count = fnts.filter(f => (Array.isArray(f.category)?f.category:[f.category]).includes(c.id)).length;
        const isFirst = i === 0;
        const isLast  = i === cats.length - 1;
        const row = document.createElement('div');
        row.className = 'cat-row';
        row.style.cssText = 'flex-wrap:wrap;gap:8px;';
        row.innerHTML = `
            <div style="display:flex;flex-direction:column;gap:2px;">
                <button class="btn btn-ghost" style="padding:1px 7px;font-size:0.7rem;min-width:28px;opacity:${isFirst?'0.25':'1'}" ${isFirst?'disabled':''} onclick="moveCat(${i},-1)" title="Ø¨Ø±Ø¯Ù† Ø¨Û† Ø³Û•Ø±Û•ÙˆÛ•">â–²</button>
                <button class="btn btn-ghost" style="padding:1px 7px;font-size:0.7rem;min-width:28px;opacity:${isLast?'0.25':'1'}" ${isLast?'disabled':''} onclick="moveCat(${i},1)" title="Ø¨Ø±Ø¯Ù† Ø¨Û† Ø®ÙˆØ§Ø±Û•ÙˆÛ•">â–¼</button>
            </div>
            <span class="lbl" id="lbl-${i}">${c.label}</span>
            <input id="inp-${i}" value="${c.label}" style="display:none;flex:1;min-width:120px;max-width:180px" placeholder="Ù†Ø§ÙˆÛŒ Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒ">
            <span class="badge" id="badge-${i}">${c.id}</span>
            <input id="inp-id-${i}" value="${c.id}" style="display:none;width:90px;font-family:var(--mono);font-size:0.75rem;background:var(--bg);border:1px solid var(--yellow);color:var(--yellow);border-radius:5px;padding:4px 8px" placeholder="Ø¦ÛŒÙ†Ú¯Ù„ÛŒØ²ÛŒ-ID">
            <span class="cnt">${count} ÙÛ†Ù†Øª</span>
            <button class="btn btn-ghost" style="padding:5px 10px;font-size:0.75rem;" onclick="startCatEdit(${i})">âœï¸ Ú¯Û†Ú•ÛŒÙ†ÛŒ Ù†Ø§Ùˆ</button>
            <button id="savebtn-${i}" class="btn btn-primary" style="display:none;padding:5px 10px;font-size:0.75rem;" onclick="saveCatName(${i})">ğŸ’¾ Ø³Û•ÛŒÚ¤</button>
            <button id="cancelbtn-${i}" class="btn btn-ghost" style="display:none;padding:5px 10px;font-size:0.75rem;" onclick="cancelCatEdit(${i})">Ú©Ø§Ù†Ø³Úµ</button>
            <button class="btn btn-red" style="padding:5px 10px;font-size:0.75rem;" onclick="deleteCat(${i})">ğŸ—‘</button>`;
        el.appendChild(row);
    });
    // Rename alert
    if (!document.getElementById('rename-alert')) {
        const al = document.createElement('div');
        al.id = 'rename-alert'; al.className = 'alert';
        el.after(al);
    }
}

function moveCat(idx, dir) {
    const newIdx = idx + dir;
    if (newIdx < 0 || newIdx >= cats.length) return;
    [cats[idx], cats[newIdx]] = [cats[newIdx], cats[idx]];
    buildCatList();
}

async function saveReorder() {
    const al = document.getElementById('reorder-alert');
    alert2(al, 'Ø³Û•ÛŒÚ¤ Ú©Ø±Ø¯Ù†ÛŒ Ú•ÛŒØ²Ø¨Û•Ù†Ø¯ÛŒ Ù†ÙˆÛ...', 'inf');

    let btnHtml = '';
    cats.forEach(c => {
        const isActive = (c.id === 'nwe' || c.id === 'Nwe') ? ' active' : '';
        btnHtml += `\n            <button class="filter-btn${isActive}" onclick="filterFonts('${c.id}', this)">${c.label}</button>`;
    });
    btnHtml += '\n        ';

    const openTag  = '<div class="marquee-content">';
    const mcStart  = RAW.indexOf(openTag);
    if (mcStart === -1) {
        return alert2(al, 'âŒ marquee-content Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ• â€” Ø¯ÙˆÙˆØ¨Ø§Ø±Û• index.html Ø¨Û•Ø±Ú©Û•ÙˆØªÛ•!', 'err');
    }

    let depth = 0, pos = mcStart;
    while (pos < RAW.length) {
        if (RAW.startsWith('<div', pos))       depth++;
        else if (RAW.startsWith('</div>', pos)) {
            depth--;
            if (depth === 0) { pos += 6; break; }
        }
        pos++;
    }

    const before = RAW.slice(0, mcStart + openTag.length);
    const after  = RAW.slice(pos - 6);
    const next   = before + btnHtml + after;

    if (next === RAW) {
        return alert2(al, 'âŒ Ù‡ÛŒÚ† Ú¯Û†Ú•Ø§Ù†Ú©Ø§Ø±ÛŒÛŒÛ•Ú© Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ• â€” Ø¦Û•Ú¯Û•Ø± Ú•ÛŒØ²Ø¨Û•Ù†Ø¯ÛŒ Ù¾ÛØ´ØªØ± Ø°Ø®ÛŒØ±Û•Ú©Ø±Ø§ÙˆÛ•', 'inf');
    }

    const ok = await ghPut(next, 'Reorder categories');
    if (ok) alert2(al, 'âœ… Ú•ÛŒØ²Ø¨Û•Ù†Ø¯ÛŒ Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒÛ•Ú©Ø§Ù† Ø°Ø®ÛŒØ±Û•Ú©Ø±Ø§!', 'ok');
    else    alert2(al, 'âŒ Ø³Û•ÛŒÚ¤ Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!', 'err');
}

function startCatEdit(idx) {
    document.getElementById('lbl-'+idx).style.display = 'none';
    document.getElementById('badge-'+idx).style.display = 'none';
    document.getElementById('inp-'+idx).style.display = 'inline-block';
    document.getElementById('inp-id-'+idx).style.display = 'inline-block';
    document.getElementById('savebtn-'+idx).style.display = 'inline-flex';
    document.getElementById('cancelbtn-'+idx).style.display = 'inline-flex';
    document.getElementById('inp-'+idx).focus();
}

function cancelCatEdit(idx) {
    document.getElementById('inp-'+idx).value = cats[idx].label;
    document.getElementById('inp-id-'+idx).value = cats[idx].id;
    document.getElementById('lbl-'+idx).style.display = '';
    document.getElementById('badge-'+idx).style.display = '';
    document.getElementById('inp-'+idx).style.display = 'none';
    document.getElementById('inp-id-'+idx).style.display = 'none';
    document.getElementById('savebtn-'+idx).style.display = 'none';
    document.getElementById('cancelbtn-'+idx).style.display = 'none';
}

async function saveCatName(idx) {
    const newLabel = document.getElementById('inp-'+idx).value.trim();
    const newId    = document.getElementById('inp-id-'+idx).value.trim().replace(/\s+/g, '');
    const al = document.getElementById('rename-alert') || document.getElementById('cadd-alert');
    const oldLabel = cats[idx].label;
    const oldId    = cats[idx].id;

    if (!newLabel) return alert2(al, 'Ù†Ø§Ùˆ Ù†Ø§Ø¨ÛØª Ø¨Û•ØªØ§Úµ Ø¨ÛØª!', 'err');
    if (!newId)    return alert2(al, 'ID Ù†Ø§Ø¨ÛØª Ø¨Û•ØªØ§Úµ Ø¨ÛØª!', 'err');
    if (/\s/.test(newId)) return alert2(al, 'ID Ù†Ø§Ø¨ÛØª Ø¨Û†Ø´Ø§ÛŒÛŒ ØªÛØ¯Ø§ Ø¨ÛØª!', 'err');
    const labelChanged = newLabel !== oldLabel;
    const idChanged    = newId !== oldId;
    if (!labelChanged && !idChanged) { cancelCatEdit(idx); return; }

    const oldBtn = `onclick="filterFonts('${oldId}', this)">${oldLabel}</button>`;
    const newBtn = `onclick="filterFonts('${newId}', this)">${newLabel}</button>`;

    if (!RAW.includes(oldBtn)) {
        return alert2(al, `âŒ Ø¯ÙˆÚ¯Ù…Û•ÛŒ "${oldId}" Ù„Û• index.html Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•.`, 'err');
    }

    let next = RAW.split(oldBtn).join(newBtn);

    if (idChanged) {
        next = next.split(`"${oldId}"`).join(`"${newId}"`);
        next = next.split(`filterFonts('${oldId}',`).join(`filterFonts('${newId}',`);
    }

    alert2(al, 'Ø³Û•ÛŒÚ¤ Ø¯Û•Ú©Ø±ÛØª Ø¨Û† GitHub...', 'inf');
    const ok = await ghPut(next, `Rename: ${oldLabel}(${oldId}) â†’ ${newLabel}(${newId})`);

    if (ok) {
        cats[idx].label = newLabel;
        cats[idx].id    = newId;
        buildCatPills();
        buildCatList();
        buildArcSel();
        alert2(al, `âœ… "${oldLabel}" â†’ "${newLabel}" Ú¯Û†Ú•Ø¯Ø±Ø§!`, 'ok');
    } else {
        alert2(al, 'âŒ Ø³Û•ÛŒÚ¤ Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!', 'err');
    }
}

function buildArcSel() {
    // Populate archive category dropdown
    const sel = document.getElementById('arc-full-cat');
    if (sel) {
        const cur = sel.value;
        sel.innerHTML = '<option value="all">Ù‡Û•Ù…ÙˆÙˆ Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒÛ•Ú©Ø§Ù†</option>';
        cats.forEach(c => {
            const o = document.createElement('option');
            o.value = c.id; o.textContent = `${c.label} (${c.id})`;
            sel.appendChild(o);
        });
        if (cur) sel.value = cur;
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Arc (font search list â€” Fonts tab)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderArc() {
    const q = (document.getElementById('arc-search')?.value || '').toLowerCase();
    const el = document.getElementById('arc-list');
    const countEl = document.getElementById('arc-count');

    const filtered = q ? fnts.filter(f => f.name.toLowerCase().includes(q)) : fnts;
    if (countEl) countEl.textContent = fnts.length;

    const makeItem = (f) => {
        const div = document.createElement('div');
        div.className = 'arc-item';
        div.innerHTML = `
            <span class="arc-name">${f.name}</span>
            <span class="arc-prev">${f.preview||''}</span>
            <button class="btn btn-ghost" style="padding:5px 10px;font-size:0.75rem;" onclick="openEdit(${fnts.indexOf(f)})">âœï¸</button>
            <button class="btn btn-red"   style="padding:5px 10px;font-size:0.75rem;" onclick="deleteFont(${fnts.indexOf(f)})">ğŸ—‘</button>`;
        return div;
    };

    if (el) {
        el.innerHTML = '';
        filtered.forEach(f => el.appendChild(makeItem(f)));
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Arc Full (Archive tab â€” search + category)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderArcFull() {
    const q   = (document.getElementById('arc-full-search')?.value || '').toLowerCase();
    const cat = document.getElementById('arc-full-cat')?.value || 'all';
    const fullEl = document.getElementById('arc-full-list');
    const countEl = document.getElementById('arc-count');
    const filteredCountEl = document.getElementById('arc-filtered-count');

    if (countEl) countEl.textContent = fnts.length;

    const filtered = fnts.filter(f => {
        const fc = Array.isArray(f.category) ? f.category : [f.category];
        const matchCat = cat === 'all' || fc.includes(cat);
        const matchQ   = !q || f.name.toLowerCase().includes(q) || (f.preview||'').toLowerCase().includes(q);
        return matchCat && matchQ;
    });

    if (filteredCountEl) filteredCountEl.textContent = filtered.length !== fnts.length ? `${filtered.length} ÙÛ†Ù†Øª` : '';

    if (!fullEl) return;
    fullEl.innerHTML = '';
    if (!filtered.length) {
        fullEl.innerHTML = '<div style="color:var(--muted);text-align:center;padding:24px;font-size:0.83rem">Ù‡ÛŒÚ† ÙÛ†Ù†ØªÛÚ© Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•</div>';
        return;
    }
    filtered.forEach(f => {
        const fc = Array.isArray(f.category) ? f.category : [f.category];
        const badgesHtml = fc.map(cid => {
            const catObj = cats.find(c => c.id === cid);
            return `<span class="badge" style="margin-left:3px;">${cid}</span>`;
        }).join('');
        const div = document.createElement('div');
        div.className = 'arc-item';
        div.innerHTML = `
            <span class="arc-name">${f.name}</span>
            <span class="arc-prev">${f.preview||''}</span>
            <span style="display:flex;gap:3px;flex-wrap:wrap;">${badgesHtml}</span>
            <button class="btn btn-ghost" style="padding:5px 10px;font-size:0.75rem;" onclick="openEdit(${fnts.indexOf(f)})">âœï¸</button>
            <button class="btn btn-red"   style="padding:5px 10px;font-size:0.75rem;" onclick="deleteFont(${fnts.indexOf(f)})">ğŸ—‘</button>`;
        fullEl.appendChild(div);
    });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Scan Folder & Add Font
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function scanFonts() {
    if (!ready) return;
    const status  = document.getElementById('scan-status');
    const fontSel = document.getElementById('f-select');
    const btn     = document.getElementById('scan-btn');

    btn.disabled = true;
    status.style.color = 'var(--muted)';
    status.textContent = 'Ø¨Û•Ø¯ÙˆØ§Ø¯Ø§Ú¯Û•Ú•Ø§Ù†...';
    fontSel.innerHTML  = '<option value="">Ø¨Ø§Ø±Ú©Ø±Ø¯Ù†...</option>';

    try {
        const res = await fetch(
            `https://api.github.com/repos/${USER}/${REPO}/contents/UniQaidarFonts`,
            { headers: { Authorization: `token ${TOKEN}`, Accept: 'application/vnd.github.v3+json' } }
        );
        if (!res.ok) throw new Error(`ÙÛ†ÚµØ¯Û•Ø± Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ• (${res.status}). Ø¯ÚµÙ†ÛŒØ§Ø¨Û• Ú©Û• Ù†Ø§ÙˆÛŒ ÙÛ†ÚµØ¯Û•Ø±Û•Ú©Û• Ú•Ø§Ø³ØªÛ•Ù‚ÛŒÙ†Û• "UniQaidarFonts" Ø¨ÛØª Ù„Û• GitHub.`);
        const files = await res.json();

        const ttfFiles = files
            .filter(f => f.type === 'file' && f.name.toLowerCase().endsWith('.ttf'))
            .sort((a, b) => a.name.localeCompare(b.name));

        const existingPaths = new Set(fnts.map(f => f.path));
        const newFiles  = ttfFiles.filter(f => !existingPaths.has(`UniQaidarFonts/${f.name}`));
        const doneFiles = ttfFiles.filter(f =>  existingPaths.has(`UniQaidarFonts/${f.name}`));

        fontSel.innerHTML = `<option value="">â€” ${newFiles.length} ÙÛ†Ù†ØªÛŒ Ù†ÙˆÛ Ø¨Û•Ø±Ø¯Û•Ø³ØªÛ• â€”</option>`;

        if (newFiles.length > 0) {
            const grp = document.createElement('optgroup');
            grp.label = `âœ… Ù†ÙˆÛ â€” Ù„Û• ÙˆÛØ¨Ø³Ø§ÛŒØª Ù†ÛŒÛŒÛ• (${newFiles.length})`;
            newFiles.forEach(f => {
                const o = document.createElement('option');
                o.value = f.name;
                o.textContent = f.name.replace('.ttf', '');
                grp.appendChild(o);
            });
            fontSel.appendChild(grp);
        }

        if (doneFiles.length > 0) {
            const grp = document.createElement('optgroup');
            grp.label = `â˜‘ï¸ Ù¾ÛØ´ØªØ± Ø²ÛŒØ§Ø¯Ú©Ø±Ø§ÙˆÛ• (${doneFiles.length})`;
            doneFiles.forEach(f => {
                const o = document.createElement('option');
                o.value = '';
                o.textContent = f.name.replace('.ttf', '') + ' âœ“';
                o.disabled = true;
                o.style.color = '#444';
                grp.appendChild(o);
            });
            fontSel.appendChild(grp);
        }

        status.textContent = `âœ… ${ttfFiles.length} ÙØ§ÛŒÙ„ÛŒ .ttf â€” ${newFiles.length} Ù†ÙˆÛ`;
        status.style.color = 'var(--green)';
    } catch(e) {
        fontSel.innerHTML = '<option value="">âŒ Ù†Û•ØªÙˆØ§Ù†Ø±Ø§ ÙÛ†ÚµØ¯Û•Ø± Ø¨Ø®ÙˆÛÙ†Ø±ÛØªÛ•ÙˆÛ•</option>';
        status.textContent = `âŒ ${e.message}`;
        status.style.color = 'var(--red)';
    }
    btn.disabled = false;
}

function onFontSelect() {
    const filename = document.getElementById('f-select').value;
    const box = document.getElementById('live-preview-box');
    const dnInput = document.getElementById('f-displayname');
    if (!filename) {
        if (box) { box.textContent = 'ÙÛ†Ù†ØªÛÚ© Ù‡Û•ÚµØ¨Ú˜ÛØ±Û• Ø¨Û† Ø¯Û•Ø±Ú©Û•ÙˆØªÙ†ÛŒ Ù¾Ø±ÛŒÚ¤ÛŒÙˆ'; box.style.fontFamily = 'Tahoma, sans-serif'; }
        if (dnInput) dnInput.value = '';
        return;
    }
    // Auto-fill displayName with filename (without .ttf) if empty
    if (dnInput && !dnInput.value.trim()) {
        dnInput.value = filename.replace(/\.ttf$/i, '');
    }
    updateFontPreview();
}

function updateFontPreview() {
    const filename = document.getElementById('f-select').value;
    if (!filename) return;
    const name = filename.replace(/\.ttf$/i, '');
    const prev = document.getElementById('f-prev').value.trim() || 'ÙÛ†Ù†ØªÛ•Ú©Ø§Ù†ÛŒ ÛŒÙˆÙ†ÛŒâ€ŒÙ‚Û•ÛŒØ¯Ø§Ø± - ÙÛ†Ù†ØªÛŒ Ú©ÙˆØ±Ø¯ÛŒ';
    const box  = document.getElementById('live-preview-box');
    if (!box) return;
    const styleId = 'dyn-' + name.replace(/[^a-zA-Z0-9]/g, '_');
    if (!document.getElementById(styleId)) {
        const s = document.createElement('style');
        s.id = styleId;
        s.textContent = `@font-face { font-family: '${name}'; src: url('UniQaidarFonts/${filename}') format('truetype'); }`;
        document.head.appendChild(s);
    }
    box.style.fontFamily = `'${name}', Tahoma, sans-serif`;
    box.textContent = prev;
}

function clearFont() {
    const sel = document.getElementById('f-select');
    if (sel) sel.selectedIndex = 0;
    set('f-prev', '');
    set('f-date', '');
    set('f-displayname', '');
    const status = document.getElementById('scan-status');
    if (status) status.textContent = '';
    const box = document.getElementById('live-preview-box');
    if (box) { box.textContent = 'ÙÛ†Ù†ØªÛÚ© Ù‡Û•ÚµØ¨Ú˜ÛØ±Û• Ø¨Û† Ø¯Û•Ø±Ú©Û•ÙˆØªÙ†ÛŒ Ù¾Ø±ÛŒÚ¤ÛŒÙˆ'; box.style.fontFamily = 'Tahoma, sans-serif'; }
    document.querySelectorAll('#f-cat-pills .cat-pill').forEach(b => b.classList.remove('on'));
    set('f-cats', '');
}

async function addFont() {
    const filename = document.getElementById('f-select').value;
    const name     = filename ? filename.replace(/\.ttf$/i, '') : '';
    const prev     = document.getElementById('f-prev').value.trim() || 'ÙÛ†Ù†ØªÛ•Ú©Ø§Ù†ÛŒ ÛŒÙˆÙ†ÛŒâ€ŒÙ‚Û•ÛŒØ¯Ø§Ø± - ÙÛ†Ù†ØªÛŒ Ú©ÙˆØ±Ø¯ÛŒ';
    const date     = v('f-date').trim();
    const cats_v   = v('f-cats').trim();
    const displayName = v('f-displayname').trim();
    const al       = document.getElementById('fadd-alert');

    if (!filename || !name) return alert2(al, 'âŒ ØªÚ©Ø§ÛŒÛ• ÙÛ†Ù†ØªÛÚ© Ù„Û• Ù„ÛŒØ³ØªÛ•Ú©Û• Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•!', 'err');

    const catsArr = cats_v ? cats_v.split(',').filter(Boolean) : [];
    if (!catsArr.length) return alert2(al, 'âŒ Ú©Û•Ù…ØªØ±ÛŒÙ† ÛŒÛ•Ú© Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒ Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•!', 'err');

    const path   = `UniQaidarFonts/${filename}`;
    if (fnts.find(f => f.path === path)) return alert2(al, `âŒ "${name}" Ù¾ÛØ´ØªØ± Ø²ÛŒØ§Ø¯Ú©Ø±Ø§ÙˆÛ•!`, 'err');

    if (!RAW || RAW.length < 1000) return alert2(al, 'âŒ index.html Ø¨Û• Ú•Ø§Ø³ØªÛŒ Ø¨Ø§Ø±Ù†Û•Ú©Ø±Ø§ÙˆÛ•. Ø¯ÙˆÙˆØ¨Ø§Ø±Û• Ù¾Û•ÛŒÙˆÛ•Ù†Ø¯ÛŒ Ø¨Ú©Û•!', 'err');

    const catStr  = catsArr.length === 1 ? `"${catsArr[0]}"` : `["${catsArr.join('","')}"]`;
    const dateStr = date ? `, dateAdded: "${date}"` : '';
    // Only write displayName if it differs from name (avoid redundancy)
    const dnStr   = (displayName && displayName !== name) ? `, displayName: "${displayName}"` : '';

    // â‘  Add @font-face inside <style> block
    let next = RAW;
    if (!next.includes(`font-family: '${name}'`)) {
        const styleClose = next.indexOf('</style>');
        if (styleClose === -1) return alert2(al, 'âŒ </style> Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•!', 'err');
        const styleBlock = next.slice(0, styleClose);
        const li = styleBlock.lastIndexOf('@font-face {');
        if (li === -1) return alert2(al, 'âŒ @font-face Ù„Û• <style> Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•!', 'err');
        const closingBrace = styleBlock.indexOf('}', li);
        const eol = next.includes('\r\n') ? '\r\n' : '\n';
        const at = closingBrace + 1 + eol.length;
        const faceDecl = `@font-face { font-family: '${name}'; src: url('${path}'); }`;
        next = next.slice(0, at) + faceDecl + eol + next.slice(at);
    }

    // â‘¡ Insert font entry at top of fonts array
    const entry = `\n    { name: "${name}", file: "${name}", path: "${path}", category: ${catStr}, preview: "${prev}"${dateStr}${dnStr} },`;
    let arrOpen = next.indexOf('const fonts = [\n');
    if (arrOpen === -1) arrOpen = next.indexOf('const fonts = [,\n');
    if (arrOpen === -1) return alert2(al, 'âŒ fonts array Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•!', 'err');
    const arrInsert = next.indexOf('\n', arrOpen) + 1;
    next = next.slice(0, arrInsert) + entry + next.slice(arrInsert);

    // â‘¢ Also insert into FONT_FILES so zip download stays in sync
    const ffAnchor = 'const FONT_FILES = [';
    const ffPos = next.indexOf(ffAnchor);
    if (ffPos !== -1) {
        const encodedPath = `UniQaidarFonts/${filename.replace(/ /g,'%20')}`;
        const ffEntry = `\n        "${encodedPath}",`;
        const ffInsert = next.indexOf('\n', ffPos) + 1;
        if (!next.includes(`"${encodedPath}"`)) {
            next = next.slice(0, ffInsert) + ffEntry + next.slice(ffInsert);
        }
    }

    // â‘£ Safety check
    if (!next.includes('<!DOCTYPE html>') || !next.includes(`"${name}"`)) {
        return alert2(al, 'âŒ Safety check Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª â€” Ø¨Û† Ù¾Ø§Ø±Ø§Ø³ØªÙ†ÛŒ ÙØ§ÛŒÙ„Û•Ú©Û•Øª Ù‡Û•ÚµÙˆÛ•Ø´Ø§Ù†Ø¯Ø±Ø§ÛŒÛ•ÙˆÛ•!', 'err');
    }

    alert2(al, 'Ù¾Û†Ø´ Ø¯Û•Ú©Ø±ÛØª Ø¨Û† GitHub...', 'inf');
    const ok = await ghPut(next, `Add font: ${name}`);
    if (ok) {
        parseFonts(); buildCatPills(); renderArc(); renderArcFull();
        alert2(al, `âœ… "${name}" Ø²ÛŒØ§Ø¯Ú©Ø±Ø§!`, 'ok');
        clearFont();
    } else {
        alert2(al, 'âŒ Ù¾Û†Ø´ Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!', 'err');
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Edit Font Modal
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openEdit(i) {
    const f = fnts[i];
    set('edit-orig-name', f.name);
    set('edit-name', f.name);
    set('edit-displayname', f.displayName || f.name || '');
    set('edit-file', f.file || f.name);
    set('edit-path', f.path);
    set('edit-preview', f.preview);
    const dateVal = (f.dateAdded || '').trim();
    set('edit-date', dateVal);

    // Build pills with correct ON state for ALL pre-selected categories
    const catArr = Array.isArray(f.category) ? f.category : (f.category ? [f.category] : []);
    const container = document.getElementById('edit-cat-pills');
    if (container) {
        container.innerHTML = '';
        cats.forEach(c => {
            const btn = document.createElement('button');
            btn.type = 'button';
            btn.className = 'cat-pill' + (catArr.includes(c.id) ? ' on' : '');
            btn.textContent = c.label;
            btn.dataset.id = c.id;
            btn.onclick = () => { btn.classList.toggle('on'); syncCatInput('edit-cat-pills'); };
            container.appendChild(btn);
        });
        syncCatInput('edit-cat-pills');
    }

    document.getElementById('edit-alert').className='alert';
    document.getElementById('edit-modal').classList.add('show');
}

function closeEditModal() {
    document.getElementById('edit-modal').classList.remove('show');
}

async function saveEditFont() {
    const origName    = v('edit-orig-name');
    const name        = v('edit-name');
    const displayName = v('edit-displayname').trim();
    const file        = v('edit-file');
    const path        = v('edit-path');
    const preview     = v('edit-preview');
    const date        = v('edit-date');
    const cats_v      = v('edit-cats');
    const al          = document.getElementById('edit-alert');

    const origFont = fnts.find(f=>f.name===origName);
    if (!origFont) return alert2(al,'âŒ ÙÛ†Ù†Øª Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•!','err');

    const catsArr = cats_v ? cats_v.split(',').filter(Boolean) : (Array.isArray(origFont.category)?origFont.category:[origFont.category]);
    const catStr  = catsArr.length===1 ? `"${catsArr[0]}"` : `[${catsArr.map(c=>`"${c}"`).join(',')}]`;
    const dateStr = date ? `, dateAdded: "${date}"` : '';
    const dnStr   = (displayName && displayName !== name) ? `, displayName: "${displayName}"` : '';
    const newEntry = `{ name: "${name}", file: "${file}", path: "${path}", category: ${catStr}, preview: "${preview}"${dateStr}${dnStr} }`;

    const escapedName = origFont.name.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');
    const rx = new RegExp(`\\{\\s*name:\\s*"${escapedName}"[^}]+\\}`, '');
    const next = RAW.replace(rx, newEntry);
    if (next===RAW) return alert2(al,'âŒ ØªÛ†Ù…Ø§Ø±Û•Ú©Û•ÛŒ ÙÛ†Ù†Øª Ù„Û• index.html Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•!','err');

    alert2(al,'Ø³Û•ÛŒÚ¤ Ø¯Û•Ú©Ø±ÛØª...','inf');
    const ok = await ghPut(next, `Edit font: ${name}`);
    if (ok) {
        parseFonts(); buildCatPills(); renderArc(); renderArcFull();
        alert2(al,`âœ… "${name}" Ù†ÙˆÛÚ©Ø±Ø§ÛŒÛ•ÙˆÛ•!`,'ok');
        setTimeout(closeEditModal, 1200);
    } else {
        alert2(al,'âŒ Ø³Û•ÛŒÚ¤ Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!','err');
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Delete Font
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function deleteFont(i) {
    const f = fnts[i];
    if (!confirm(`ÙÛ†Ù†ØªÛŒ "${f.name}" Ø¨Ø³Ú•ÛØªÛ•ÙˆÛ• Ù„Û• ÙˆÛØ¨Ø³Ø§ÛŒØªØŸ\n\nØªÛØ¨ÛŒÙ†ÛŒ: ØªÛ•Ù†Ù‡Ø§ Ù„Û• index.html Ø¯Û•Ø³Ú•ÛØªÛ•ÙˆÛ•. ÙØ§ÛŒÙ„ÛŒ .ttf Ù„Û• UniQaidarFonts/ Ù„Û• GitHub Ø¯Û•Ù…ÛÙ†ÛØªÛ•ÙˆÛ•.`)) return;
    const escapedName = f.name.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');
    const rx = new RegExp(`[ \\t]*\\{\\s*name:\\s*"${escapedName}"[^}]+\\},?\\r?\\n?`, '');
    let next = RAW.replace(rx, '');
    if (next===RAW) return alert('âŒ ØªÛ†Ù…Ø§Ø±Û•Ú©Û•ÛŒ ÙÛ†Ù†Øª Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•!');

    // Also remove from FONT_FILES (keep zip download in sync)
    const filename = (f.file || f.name) + '.ttf';
    const encodedPath = `UniQaidarFonts/${filename.replace(/ /g,'%20')}`;
    const ffRx = new RegExp(`[ \\t]*"${encodedPath.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')}",?\\r?\\n?`, '');
    next = next.replace(ffRx, '');

    showOverlay(`Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ ${f.name}...`);
    const ok = await ghPut(next, `Delete font: ${f.name}`);
    hideOverlay();
    if (ok) { parseFonts(); renderArc(); renderArcFull(); }
    else alert('âŒ Ø³Ú•ÛŒÙ†Û•ÙˆÛ• Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Add Category
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function addCat() {
    const label = v('new-cat-label');
    const id    = v('new-cat-id');
    const al    = document.getElementById('cadd-alert');
    if (!label||!id) return alert2(al,'ØªÚ©Ø§ÛŒÛ• Ù‡Û•Ø±Ø¯ÙˆÙˆÚ©ÛŒØ§Ù† Ù¾Ú• Ø¨Ú©Û•Ø±Û•ÙˆÛ•!','err');
    if (cats.find(c=>c.id===id)) return alert2(al,`ID "${id}" Ù¾ÛØ´ØªØ± Ù‡Û•ÛŒÛ•!`,'err');

    const anchor = '<div class="marquee-content">';
    const newBtn = `\n            <button class="filter-btn" onclick="filterFonts('${id}', this)">${label}</button>`;
    if (!RAW.includes(anchor)) return alert2(al,'âŒ anchor Ù„Û• index.html Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•!','err');

    const next = RAW.replace(anchor, anchor + newBtn);
    alert2(al,'Ø³Û•ÛŒÚ¤ Ø¯Û•Ú©Ø±ÛØª...','inf');
    const ok = await ghPut(next, `Add category: ${label}`);
    if (ok) {
        cats.push({id,label});
        buildCatPills(); buildCatList(); buildArcSel();
        alert2(al,`âœ… "${label}" Ø²ÛŒØ§Ø¯Ú©Ø±Ø§!`,'ok');
        set('new-cat-label',''); set('new-cat-id','');
    } else {
        alert2(al,'âŒ Ø³Û•ÛŒÚ¤ Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!','err');
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Delete Category
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function deleteCat(idx) {
    const c = cats[idx];
    if (c.id==='All') return alert('Ù†Û•ØªÙˆØ§Ù†Ø±ÛØª Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒ "All" Ø¨Ø³Ú•ÛØªÛ•ÙˆÛ•.');
    const n = fnts.filter(f=>(Array.isArray(f.category)?f.category:[f.category]).includes(c.id)).length;
    const msg = n>0
        ? `Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒ "${c.label}" Ø¨Ø³Ú•ÛØªÛ•ÙˆÛ•ØŸ\n\nâš ï¸ ${n} ÙÛ†Ù†Øª Ù„Û•Ù… Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒÛ•Ø¯Ø§Ù†. Ù‡ÛØ´ØªØ§ Ø¯Û•Ù…ÛÙ†Ù†Û•ÙˆÛ• Ø¨Û•ÚµØ§Ù… Ù„Û•Ù… Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒÛ•Ø¯Ø§ Ù†Ø§ÛŒÛ•Ù†.`
        : `Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒ "${c.label}" Ø¨Ø³Ú•ÛØªÛ•ÙˆÛ•ØŸ`;
    if (!confirm(msg)) return;
    const lineRx = new RegExp(`[ \\t]*<button[^>]*filterFonts\\('${c.id.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')}'[^>]*>[^<]*<\\/button>\\r?\\n?`,'');
    const next = RAW.replace(lineRx,'');
    if (next===RAW) return alert(`âŒ Ø¯ÙˆÚ¯Ù…Û•ÛŒ "${c.id}" Ù„Û• index.html Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•.`);
    showOverlay(`Ø³Ú•ÛŒÙ†Û•ÙˆÛ•ÛŒ Ú©Ø§ØªÛÚ¯Û†Ø±ÛŒ: ${c.label}...`);
    const ok = await ghPut(next, `Delete category: ${c.label}`);
    hideOverlay();
    if (ok) { cats.splice(idx,1); buildCatPills(); buildCatList(); buildArcSel(); }
    else alert('âŒ Ø³Ú•ÛŒÙ†Û•ÙˆÛ• Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Settings: Load all fields
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function loadAllSettings() {
    // â”€â”€ Header Social â”€â”€
    const fbMatch = RAW.match(/id="social-facebook" href="([^"]*)"/);
    if (fbMatch) set('h-facebook', fbMatch[1]);
    const tgMatch = RAW.match(/id="social-telegram" href="([^"]*)"/);
    if (tgMatch) set('h-telegram', tgMatch[1]);

    // â”€â”€ Logo URL â”€â”€
    const logoMatch = RAW.match(/id="logo-link" href="([^"]*)"/);
    if (logoMatch) set('h-logo-url', logoMatch[1]);

    // â”€â”€ Search placeholders â”€â”€
    const desktopPH = RAW.match(/var DESKTOP = '([^']*)'/);
    if (desktopPH) set('h-search-desktop', desktopPH[1]);
    const mobilePH = RAW.match(/var MOBILE = '([^']*)'/);
    if (mobilePH) set('h-search-mobile', mobilePH[1]);

    // â”€â”€ Size bar â”€â”€
    const sizeLabel = RAW.match(/<span style="color:#aaa;font-size:0\.82rem;white-space:nowrap">([^<]*)<\/span>/);
    if (sizeLabel) set('h-sizebar-label', sizeLabel[1]);
    const sizeReset = RAW.match(/changeFontSize\(\d+\)[^>]*>[^<]*>(.*?)<\/button>/);
    if (sizeReset) set('h-sizebar-reset', sizeReset[1].trim());
    const sizeMin = RAW.match(/id="font-size-slider" min="(\d+)"/);
    if (sizeMin) set('h-sizebar-min', sizeMin[1]);
    const sizeMax = RAW.match(/id="font-size-slider" min="\d+" max="(\d+)"/);
    if (sizeMax) set('h-sizebar-max', sizeMax[1]);
    const sizeDef = RAW.match(/id="font-size-slider" min="\d+" max="\d+" value="(\d+)"/);
    if (sizeDef) set('h-sizebar-default', sizeDef[1]);

    // â”€â”€ Footer â”€â”€
    const footerMatch = RAW.match(/<p id="footer-text"[^>]*>([\s\S]*?)<\/p>/);
    if (footerMatch) set('h-footer', footerMatch[1].trim());

    // â”€â”€ Download Modal â”€â”€
    const dmHeaderBtn = RAW.match(/<span id="header-btn-label">([^<]*)<\/span>/);
    if (dmHeaderBtn) set('dm-header-btn-inp', dmHeaderBtn[1]);
    const dmTitle = RAW.match(/<h2 id="dm-title"[^>]*>([^<]*)<\/h2>/);
    if (dmTitle) set('dm-title-inp', dmTitle[1]);
    const dmDesc = RAW.match(/<p id="dm-desc"[^>]*>([^<]*)<\/p>/);
    if (dmDesc) set('dm-desc-inp', dmDesc[1]);
    const dmBtnLabel = RAW.match(/<span id="dm-btn-label">([^<]*)<\/span>/);
    if (dmBtnLabel) set('dm-btn-inp', dmBtnLabel[1]);
    const dmHref = RAW.match(/<a id="dm-btn" href="([^"]*)"/);
    if (dmHref) set('dl-url', dmHref[1]);
    const dmDirectLabel = RAW.match(/<span id="dm-direct-label">([^<]*)<\/span>/);
    if (dmDirectLabel) set('dm-direct-inp', dmDirectLabel[1]);

    // â”€â”€ About Modal â”€â”€
    const aboutTitle = RAW.match(/<h2 id="about-title"[^>]*>([^<]*)<\/h2>/);
    if (aboutTitle) set('about-title-inp', aboutTitle[1]);
    const aboutContent = RAW.match(/<p id="about-content"[^>]*>([\s\S]*?)<\/p>/);
    if (aboutContent) set('about-text', aboutContent[1].replace(/<br\s*\/?>/g,'\n').trim());
    const aboutFeatTitle = RAW.match(/<div id="about-features-title"[^>]*>\s*([^<]*)\s*<\/div>/);
    if (aboutFeatTitle) set('about-features-title-inp', aboutFeatTitle[1].trim());
    for (let i=1;i<=4;i++) {
        const iconM = RAW.match(new RegExp(`<span id="about-feat${i}-icon"[^>]*>([^<]*)<\\/span>`));
        if (iconM) set(`about-feat${i}-icon-inp`, iconM[1]);
        const textM = RAW.match(new RegExp(`<span id="about-feat${i}-text">([\\s\\S]*?)<\\/span>`));
        if (textM) set(`about-feat${i}-text-inp`, textM[1].replace(/<[^>]+>/g,'').trim());
    }
    const launchM = RAW.match(/<span id="about-launch-date"[^>]*>([^<]*)<\/span>/);
    if (launchM) set('about-launch-inp', launchM[1]);
    const devM = RAW.match(/<span id="about-developer"[^>]*>([^<]*)<\/span>/);
    if (devM) set('about-dev-inp', devM[1]);

    // â”€â”€ SEO â”€â”€
    const titleM = RAW.match(/<title>([^<]*)<\/title>/);
    if (titleM) set('seo-title', titleM[1]);
    const descM = RAW.match(/<meta name="description" content="([^"]*)"/);
    if (descM) set('seo-desc', descM[1]);
    const kwM = RAW.match(/<meta name="keywords" content="([^"]*)"/);
    if (kwM) set('seo-keywords', kwM[1]);
    const ogTitleM = RAW.match(/<meta property="og:title" content="([^"]*)"/);
    if (ogTitleM) set('seo-og-title', ogTitleM[1]);
    const ogDescM = RAW.match(/<meta property="og:description" content="([^"]*)"/);
    if (ogDescM) set('seo-og-desc', ogDescM[1]);
    const ogImgM = RAW.match(/<meta property="og:image" content="([^"]*)"/);
    if (ogImgM) set('seo-og-image', ogImgM[1]);
    const ogUrlM = RAW.match(/<meta property="og:url" content="([^"]*)"/);
    if (ogUrlM) set('seo-og-url', ogUrlM[1]);
    const gaM = RAW.match(/gtag\('config',\s*'([^']*)'\)/);
    if (gaM) set('seo-ga-id', gaM[1]);

    // enable all save buttons
    ['header-social-btn','header-logo-btn','header-search-btn','header-sizebar-btn',
     'header-footer-btn','dl-btn','about-btn','seo-btn'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.disabled = false;
    });
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Save: Header Social
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function saveHeaderSocial() {
    const fb = v('h-facebook');
    const tg = v('h-telegram');
    const al = document.getElementById('header-social-alert');
    let next = RAW;
    if (fb) next = next.replace(/(<a id="social-facebook" href=")[^"]*"/, `$1${fb}"`);
    if (tg) next = next.replace(/(<a id="social-telegram" href=")[^"]*"/, `$1${tg}"`);
    if (next===RAW) return alert2(al,'âŒ Ù†Û•ØªÙˆØ§Ù†Ø±Ø§ Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•!','err');
    alert2(al,'Ø³Û•ÛŒÚ¤ Ø¯Û•Ú©Ø±ÛØª...','inf');
    const ok = await ghPut(next,'Update: social links');
    ok ? alert2(al,'âœ… Ø³Û•ÛŒÚ¤Ú©Ø±Ø§!','ok') : alert2(al,'âŒ Ø³Û•ÛŒÚ¤ Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!','err');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Save: Logo URL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function saveHeaderLogo() {
    const url = v('h-logo-url');
    const al  = document.getElementById('header-logo-alert');
    if (!url) return alert2(al,'Ù„ÛŒÙ†Ú© Ù¾Ú• Ø¨Ú©Û•Ø±Û•ÙˆÛ•!','err');
    let next = RAW;
    next = next.replace(/(<a id="logo-link" href=")[^"]*"/, `$1${url}"`);
    next = next.replace(/(id="logo-link"[^>]*onclick="window\.location\.href=')[^']*'/, `$1${url}'`);
    alert2(al,'Ø³Û•ÛŒÚ¤ Ø¯Û•Ú©Ø±ÛØª...','inf');
    const ok = await ghPut(next,'Update: logo link');
    ok ? alert2(al,'âœ… Ø³Û•ÛŒÚ¤Ú©Ø±Ø§!','ok') : alert2(al,'âŒ Ø³Û•ÛŒÚ¤ Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!','err');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Save: Search Placeholders
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function saveHeaderSearch() {
    const desktop = v('h-search-desktop');
    const mobile  = v('h-search-mobile');
    const al = document.getElementById('header-search-alert');
    let next = RAW;
    if (desktop) next = next.replace(/(var DESKTOP = ')[^']*'/, `$1${desktop}'`);
    if (mobile)  next = next.replace(/(var MOBILE = ')[^']*'/, `$1${mobile}'`);
    alert2(al,'Ø³Û•ÛŒÚ¤ Ø¯Û•Ú©Ø±ÛØª...','inf');
    const ok = await ghPut(next,'Update: search placeholders');
    ok ? alert2(al,'âœ… Ø³Û•ÛŒÚ¤Ú©Ø±Ø§!','ok') : alert2(al,'âŒ Ø³Û•ÛŒÚ¤ Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!','err');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Save: Size Bar
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function saveHeaderSizebar() {
    const label   = v('h-sizebar-label');
    const reset   = v('h-sizebar-reset');
    const min     = v('h-sizebar-min');
    const max     = v('h-sizebar-max');
    const def     = v('h-sizebar-default');
    const al = document.getElementById('header-sizebar-alert');
    let next = RAW;
    if (label) next = next.replace(/(<span style="color:#aaa;font-size:0\.82rem;white-space:nowrap">)[^<]*(<\/span>)/, `$1${label}$2`);
    if (min)   next = next.replace(/(id="font-size-slider" min=")[^"]*"/, `$1${min}"`);
    if (max)   next = next.replace(/(id="font-size-slider" min="\d+" max=")[^"]*"/, `$1${max}"`);
    if (def) {
        next = next.replace(/(id="font-size-slider" min="\d+" max="\d+" value=")[^"]*"/, `$1${def}"`);
        next = next.replace(/(changeFontSize\()\d+(\);[^>]*>[^>]*>)[^<]*(px<\/span>)/, (m,a,b,c) => `${a}${def}${b}${def}px${c}`);
        next = next.replace(/(onclick="changeFontSize\()\d+(\); document\.getElementById\('font-size-slider'\)\.value=)\d+(;")/, `$1${def}$2${def}$3`);
    }
    // reset button label
    if (reset) next = next.replace(/(onclick="changeFontSize\(\d+\); document\.getElementById\('font-size-slider'\)\.value=\d+;"[^>]*>)[^<]*(<\/button>)/, `$1${reset}$2`);
    alert2(al,'Ø³Û•ÛŒÚ¤ Ø¯Û•Ú©Ø±ÛØª...','inf');
    const ok = await ghPut(next,'Update: size bar');
    ok ? alert2(al,'âœ… Ø³Û•ÛŒÚ¤Ú©Ø±Ø§!','ok') : alert2(al,'âŒ Ø³Û•ÛŒÚ¤ Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!','err');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Save: Footer
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function saveFooter() {
    const text = v('h-footer');
    const al   = document.getElementById('header-footer-alert');
    if (!text) return alert2(al,'Ø¯Û•Ù‚ Ù†Ø§Ø¨ÛØª Ø¨Û•ØªØ§Úµ Ø¨ÛØª!','err');
    const next = RAW.replace(/<p id="footer-text"[^>]*>[\s\S]*?<\/p>/, `<p id="footer-text" dir="ltr">${text}</p>`);
    if (next===RAW) return alert2(al,'âŒ footer-text Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•!','err');
    alert2(al,'Ø³Û•ÛŒÚ¤ Ø¯Û•Ú©Ø±ÛØª...','inf');
    const ok = await ghPut(next,'Update: footer');
    ok ? alert2(al,'âœ… Ø³Û•ÛŒÚ¤Ú©Ø±Ø§!','ok') : alert2(al,'âŒ Ø³Û•ÛŒÚ¤ Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!','err');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Save: Download Modal
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function saveDownloadModal() {
    const headerBtn = v('dm-header-btn-inp');
    const title     = v('dm-title-inp');
    const desc      = v('dm-desc-inp');
    const btnLabel  = v('dm-btn-inp');
    const url       = v('dl-url');
    const directLbl = v('dm-direct-inp');
    const al        = document.getElementById('dl-alert');
    if (!url) return alert2(al,'Ù„ÛŒÙ†Ú©ÛŒ Ø¯Ø§Ú¯Ø±ØªÙ† Ù¾Ú• Ø¨Ú©Û•Ø±Û•ÙˆÛ•!','err');

    let next = RAW;
    if (headerBtn) next = next.replace(/<span id="header-btn-label">[^<]*<\/span>/, `<span id="header-btn-label">${headerBtn}</span>`);
    if (title) {
        next = next.replace(/<h2 id="dm-title"[^>]*>[^<]*<\/h2>/, `<h2 id="dm-title" style="font-size:1.5rem;letter-spacing:0.01em;">${title}</h2>`);
    }
    if (desc)      next = next.replace(/<p id="dm-desc"[^>]*>[^<]*<\/p>/, `<p id="dm-desc" style="font-size:1.05rem;margin-bottom:24px;color:#444;line-height:1.8;background:#f4f7ff;border-radius:12px;padding:14px 18px;border:1px solid #d8e3ff;">${desc}</p>`);
    if (btnLabel)  next = next.replace(/<span id="dm-btn-label">[^<]*<\/span>/, `<span id="dm-btn-label">${btnLabel}</span>`);
    if (directLbl) next = next.replace(/<span id="dm-direct-label">[^<]*<\/span>/, `<span id="dm-direct-label">${directLbl}</span>`);
    next = next.replace(/(<a id="dm-btn" href=")[^"]*"/, `$1${url}"`);

    alert2(al,'Ø³Û•ÛŒÚ¤ Ø¯Û•Ú©Ø±ÛØª...','inf');
    const ok = await ghPut(next,'Update: download modal');
    ok ? alert2(al,'âœ… Ø³Û•ÛŒÚ¤Ú©Ø±Ø§!','ok') : alert2(al,'âŒ Ø³Û•ÛŒÚ¤ Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!','err');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Save: About Modal
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function saveAbout() {
    const al = document.getElementById('about-alert');
    let next = RAW;

    const title = v('about-title-inp');
    if (title) next = next.replace(/<h2 id="about-title"[^>]*>[^<]*<\/h2>/, `<h2 id="about-title" style="font-size:1.6rem;letter-spacing:0.02em;">${title}</h2>`);

    const text = document.getElementById('about-text').value.trim();
    if (text) {
        const htmlText = text.replace(/\n/g,'<br>\n');
        next = next.replace(/<p id="about-content"[\s\S]*?<\/p>/, `<p id="about-content" style="font-size:1.05rem;color:#333;text-align:justify;line-height:2;">\n            ${htmlText}\n        </p>`);
    }

    const featTitle = v('about-features-title-inp');
    if (featTitle) next = next.replace(/(<div id="about-features-title"[^>]*>)[^<]*(<\/div>)/, `$1\n                ${featTitle}\n            $2`);

    for (let i=1;i<=4;i++) {
        const icon = v(`about-feat${i}-icon-inp`);
        const txt  = v(`about-feat${i}-text-inp`);
        if (icon) next = next.replace(new RegExp(`(<span id="about-feat${i}-icon"[^>]*>)[^<]*(<\\/span>)`), `$1${icon}$2`);
        if (txt)  next = next.replace(new RegExp(`<span id="about-feat${i}-text">[\\s\\S]*?<\\/span>`), `<span id="about-feat${i}-text">${txt}</span>`);
    }

    const launch = v('about-launch-inp');
    if (launch) next = next.replace(/(<span id="about-launch-date"[^>]*>)[^<]*(<\/span>)/, `$1${launch}$2`);
    const dev = v('about-dev-inp');
    if (dev)    next = next.replace(/(<span id="about-developer"[^>]*>)[^<]*(<\/span>)/, `$1${dev}$2`);

    if (next===RAW) return alert2(al,'âŒ Ù‡ÛŒÚ† Ú¯Û†Ú•Ø§Ù†Ú©Ø§Ø±ÛŒÛŒÛ•Ú© Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ• ÛŒØ§Ù† Ø¦ÛÙ„ÛŒÙ…ÛÙ†ØªÛ•Ú©Ø§Ù† Ù†Û•Ø¯Û†Ø²Ø±Ø§ÛŒÛ•ÙˆÛ•!','err');
    alert2(al,'Ø³Û•ÛŒÚ¤ Ø¯Û•Ú©Ø±ÛØª...','inf');
    const ok = await ghPut(next,'Update: about modal');
    ok ? alert2(al,'âœ… Ø³Û•ÛŒÚ¤Ú©Ø±Ø§!','ok') : alert2(al,'âŒ Ø³Û•ÛŒÚ¤ Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!','err');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Save: SEO
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function saveSEO() {
    const al = document.getElementById('seo-alert');
    let next = RAW;

    const title    = v('seo-title');
    const desc     = v('seo-desc');
    const kw       = v('seo-keywords');
    const ogTitle  = v('seo-og-title');
    const ogDesc   = v('seo-og-desc');
    const ogImg    = v('seo-og-image');
    const ogUrl    = v('seo-og-url');
    const gaId     = v('seo-ga-id');

    if (title)   next = next.replace(/<title>[^<]*<\/title>/, `<title>${title}</title>`);
    if (desc)    next = next.replace(/(<meta name="description" content=")[^"]*"/, `$1${desc}"`);
    if (kw)      next = next.replace(/(<meta name="keywords" content=")[^"]*"/, `$1${kw}"`);
    if (ogTitle) next = next.replace(/(<meta property="og:title" content=")[^"]*"/, `$1${ogTitle}"`);
    if (ogDesc)  next = next.replace(/(<meta property="og:description" content=")[^"]*"/, `$1${ogDesc}"`);
    if (ogImg)   next = next.replace(/(<meta property="og:image" content=")[^"]*"/, `$1${ogImg}"`);
    if (ogUrl)   next = next.replace(/(<meta property="og:url" content=")[^"]*"/, `$1${ogUrl}"`);
    if (gaId) {
        next = next.replace(/(gtag\.js\?id=)[^"&]+/, `$1${gaId}`);
        next = next.replace(/(gtag\('config',\s*')[^']*'/, `$1${gaId}'`);
    }

    if (next===RAW) return alert2(al,'âŒ Ù‡ÛŒÚ† Ú¯Û†Ú•Ø§Ù†Ú©Ø§Ø±ÛŒÛŒÛ•Ú© Ù†Û•Ú©Ø±Ø§ÙˆÛ•!','err');
    alert2(al,'Ø³Û•ÛŒÚ¤ Ø¯Û•Ú©Ø±ÛØª...','inf');
    const ok = await ghPut(next,'Update: SEO meta');
    ok ? alert2(al,'âœ… Ø³Û•ÛŒÚ¤Ú©Ø±Ø§!','ok') : alert2(al,'âŒ Ø³Û•ÛŒÚ¤ Ø³Û•Ø±Ù†Û•Ú©Û•ÙˆØª. ØªÛ†Ú©ÛÙ†Û•Ú©Û•Øª Ø¨Ù¾Ø´Ú©Ù†Û•ÙˆÛ•!','err');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Interface Font Tab
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildInterfaceFontSelect() {
    const sel = document.getElementById('ifont-select');
    if (!sel) return;
    sel.innerHTML = '<option value="">â€” Select a font â€”</option>';
    // Get current interface font from index.html
    const currentM = RAW ? RAW.match(/font-family:\s*'([^']+)',\s*Tahoma,\s*Arial,\s*sans-serif\s*!important/) : null;
    const currentFont = currentM ? currentM[1] : 'UniQAIDAR_Peregraf 01';
    const el = document.getElementById('ifont-current');
    if (el) el.textContent = currentFont;

    // Sort fonts alphabetically
    const sorted = [...fnts].sort((a,b) => a.name.localeCompare(b.name));
    sorted.forEach(f => {
        const opt = document.createElement('option');
        const displayN = f.displayName || f.name;
        opt.value = f.name;
        opt.textContent = displayN;
        if (f.name === currentFont) opt.selected = true;
        sel.appendChild(opt);
    });
    // Enable button
    const btn = document.getElementById('ifont-btn');
    if (btn) btn.disabled = false;
    // Show preview of current font
    previewInterfaceFont();
}

function previewInterfaceFont() {
    const sel = document.getElementById('ifont-select');
    if (!sel || !sel.value) return;
    const name = sel.value;
    const box  = document.getElementById('ifont-preview-text');
    if (!box) return;
    // Load font if needed
    const styleId = 'ifont-dyn-' + name.replace(/[^a-zA-Z0-9]/g, '_');
    if (!document.getElementById(styleId)) {
        const s = document.createElement('style');
        s.id = styleId;
        s.textContent = `@font-face { font-family: '${name}'; src: url('UniQaidarFonts/${name}.ttf') format('truetype'); }`;
        document.head.appendChild(s);
    }
    box.style.fontFamily = `'${name}', Tahoma, sans-serif`;
}

async function saveInterfaceFont() {
    const sel = document.getElementById('ifont-select');
    const al  = document.getElementById('ifont-alert');
    if (!sel || !sel.value) return alert2(al, 'âŒ ØªÚ©Ø§ÛŒÛ• ÙÛ†Ù†ØªÛÚ© Ù‡Û•ÚµØ¨Ú˜ÛØ±Û•!', 'err');
    const newFont = sel.value;

    // Replace the interface font in the CSS rule
    // Pattern: font-family: 'OldFont', Tahoma, Arial, sans-serif !important;
    let next = RAW;
    const replaced = next.replace(
        /(font-family:\s*')[^']+(',\s*Tahoma,\s*Arial,\s*sans-serif\s*!important)/g,
        `$1${newFont}$2`
    );
    if (replaced === RAW) {
        return alert2(al, 'âŒ Interface font pattern not found in index.html! Make sure your index.html has the standard font-family rule.', 'err');
    }
    // Also update the monospace fallback line if present
    const replaced2 = replaced.replace(
        /(font-family:\s*')[^']+(',\s*Tahoma,\s*monospace)/g,
        `$1${newFont}$2`
    );

    alert2(al, 'Saving to GitHub...', 'inf');
    const ok = await ghPut(replaced2, `Update interface font: ${newFont}`);
    if (ok) {
        alert2(al, `âœ… Interface font updated to "${newFont}"!`, 'ok');
        const el = document.getElementById('ifont-current');
        if (el) el.textContent = newFont;
    } else {
        alert2(al, 'âŒ Save failed. Check your token!', 'err');
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Helpers
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function setReady(val) {
    ready = val;
    document.getElementById('sdot').className = 'status-dot' + (val ? ' on' : '');
    document.getElementById('rbadge').textContent = val ? `${USER}/${REPO}` : 'Ù¾Û•ÛŒÙˆÛ•Ù†Ø¯ Ù†Û•Ú©Ø±Ø§ÙˆÛ•';
    document.getElementById('fbtn').disabled = !val;
    document.getElementById('cbtn').disabled = !val;
    if (val) loadAllSettings();
}

function go(id, btn) {
    document.querySelectorAll('.tab-content').forEach(t=>t.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    btn.classList.add('active');
    if (id==='t-arc') renderArcFull();
    if (id==='t-ifont') buildInterfaceFontSelect();
}

function showOverlay(msg) { document.getElementById('overlay-msg').textContent = msg||'...'; document.getElementById('overlay').classList.add('show'); }
function hideOverlay()    { document.getElementById('overlay').classList.remove('show'); }
function v(id)   { return document.getElementById(id)?.value?.trim()||''; }
function set(id,val) { const el=document.getElementById(id); if(el) el.value=val; }
function alert2(el, msg, type) { el.textContent=msg; el.className=`alert ${type} show`; }
</script>
</body>
</html>
